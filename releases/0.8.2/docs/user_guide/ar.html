
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Abstract Rendering &mdash; Bokeh 0.8.2 documentation</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bokeh-docs.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.2.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.2.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.8.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../../_static/bokeh_white_32.ico"/>
    <link rel="top" title="Bokeh 0.8.2 documentation" href="../../index.html" />
    <link rel="up" title="User Guide" href="../user_guide.html" />
    <link rel="next" title="Examples" href="examples.html" />
    <link rel="prev" title="Bokeh Widgets" href="widgets.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>


<div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">

    <div class="container">

      <div class="navbar-header">

        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <a class="logo"> <img height="32" width="32" src="../../_static/bokeh-transparent.png" /></a>
        <a class="navbar-brand" href="../../index.html">Bokeh</a>
        <span class="navbar-text navbar-version pull-left"><b>0.8.2</b></span>
      </div>
        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="../gallery.html">Gallery</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#quick-installation">Quick Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#ipython-notebooks">IPython Notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#other-languages">Other Languages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#sample-data">Sample Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#concepts">Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#more-examples">More examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#bokeh-plot-server">Bokeh Plot Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#what-s-next">What&#8217;s next?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#package-installs">Package Installs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#sample-data">Sample Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#notes-for-windows-users">Notes for Windows Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#installing-from-source">Installing from Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#developer-builds">Developer Builds</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#bokehjs-standalone">BokehJS Standalone</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html">Bokeh Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial/quick_install.html">Quick Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial/basic.html">Basic Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial/topical.html">Topical Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial/advanced.html">Advanced Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial/more_info.html">More Information</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gallery.html">Gallery</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../gallery/anscombe.html">anscombe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/area_chart.html">area_chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/boxplot.html">boxplot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/boxplot_chart.html">boxplot_chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/brewer.html">brewer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/burtin.html">burtin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/candlestick.html">candlestick</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/cat_heatmap_chart.html">cat_heatmap_chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/categorical.html">categorical</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/choropleth.html">choropleth</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/color_scatter.html">color_scatter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/correlation.html">correlation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/density.html">density</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/donut_chart.html">donut_chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/dot_chart.html">dot_chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/elements.html">elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/ggplot_line.html">ggplot_line</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/glucose.html">glucose</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/histogram.html">histogram</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/histograms_chart.html">histograms_chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/image.html">image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/image_rgba.html">image_rgba</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/iris.html">iris</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/iris_scatter_chart.html">iris_scatter_chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/iris_splom.html">iris_splom</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/kde.html">kde</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/legend.html">legend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/les_mis.html">les_mis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/line_chart.html">line_chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/lorenz.html">lorenz</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/periodic.html">periodic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/quiver.html">quiver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/scatter.html">scatter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/sinerror.html">sinerror</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/stacked_bar_chart.html">stacked_bar_chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/step.html">step</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/step_chart.html">step_chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/stocks.html">stocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/stocks_timeseries_chart.html">stocks_timeseries_chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/streamline.html">streamline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/texas.html">texas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/unemployment.html">unemployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/violin.html">violin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/xkcd_density.html">xkcd_density</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server_gallery/aw_animate.html">Animated Glyph Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server_gallery/crossfilter_server.html">Crossfilter Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server_gallery/line_animate.html">Animated Line Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server_gallery/sliders_server.html">Sliders Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server_gallery/stocks_server.html">Stocks Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery.html#server-examples">Server Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery.html#static-examples">Static Examples</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../user_guide.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="plotting.html">Basic Plotting with Glyphs</a></li>
<li class="toctree-l2"><a class="reference internal" href="charts.html">High Level Charts</a></li>
<li class="toctree-l2"><a class="reference internal" href="objects.html">Configuring and Styling Bokeh Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="server.html">Using the Bokeh Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="embedding.html">Embedding Bokeh Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="widgets.html">Bokeh Widgets</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Abstract Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide.html">Developer Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/process.html">Software Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/building.html">Building and Installing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/documentation.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/objects.html">Bokeh Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/bokehjs.html">BokehJS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/bindings.html">Language Bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/notes.html">Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev_guide/server.html">Bokeh Server Architecture</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#core-team">Core Team</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#general-questions">General Questions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#technical-questions">Technical Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release Notes and Roadmap</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../release_notes.html#release-notes">Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes.html#roadmap">Roadmap</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/properties.html">Properties System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/models.html">Model Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/palettes.html">Standard Palettes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/resources_embedding.html">Resources and Embedding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/plot_objects.html">Plot Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/plotting.html"><tt class="docutils literal"><span class="pre">bokeh.plotting</span></tt> Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/charts.html"><tt class="docutils literal"><span class="pre">bokeh.charts</span></tt> Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/compat.html">Compatibility Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/rest_api.html">Bokeh Server REST API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/bokehjs.html">BokehJS Interface Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/glyphs.html">Bokeh Glyph Quick Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/sphinxext.html">Sphinx Extensions</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Abstract Rendering</a><ul>
<li><a class="reference internal" href="#recipes-interface">Recipes Interface</a><ul>
<li><a class="reference internal" href="#heatmap">heatmap</a></li>
<li><a class="reference internal" href="#contours">contours</a></li>
<li><a class="reference internal" href="#hdalpha">hdalpha</a></li>
</ul>
</li>
<li><a class="reference internal" href="#functions-interface">Functions Interface</a></li>
<li><a class="reference internal" href="#publications">Publications</a></li>
<li><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="widgets.html" title="Previous Chapter: Bokeh Widgets"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Bokeh Widgets</span>
    </a>
  </li>
  <li>
    <a href="examples.html" title="Next Chapter: Examples"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Examples &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html">Bokeh Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery.html">Gallery</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../user_guide.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="plotting.html">Basic Plotting with Glyphs</a></li>
<li class="toctree-l2"><a class="reference internal" href="charts.html">High Level Charts</a></li>
<li class="toctree-l2"><a class="reference internal" href="objects.html">Configuring and Styling Bokeh Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="server.html">Using the Bokeh Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="embedding.html">Embedding Bokeh Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="widgets.html">Bokeh Widgets</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Abstract Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release Notes and Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference Guide</a></li>
</ul>

<div id="sourcelink">
  <a href="../../_sources/docs/user_guide/ar.txt"
     rel="nofollow">Source</a>
</div>
<form action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-9">
      
  <div class="section" id="abstract-rendering">
<span id="userguid-ar"></span><h1>Abstract Rendering<a class="headerlink" href="#abstract-rendering" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#recipes-interface" id="id1">Recipes Interface</a><ul>
<li><a class="reference internal" href="#heatmap" id="id2">heatmap</a></li>
<li><a class="reference internal" href="#contours" id="id3">contours</a></li>
<li><a class="reference internal" href="#hdalpha" id="id4">hdalpha</a></li>
</ul>
</li>
<li><a class="reference internal" href="#functions-interface" id="id5">Functions Interface</a></li>
<li><a class="reference internal" href="#publications" id="id6">Publications</a></li>
<li><a class="reference internal" href="#limitations" id="id7">Limitations</a></li>
</ul>
</div>
<p>Abstract rendering is a bin-based rendering technique
that provides greater control over a visual representation
and access to larger data sets through server-side processing.
There are two interfaces for abstract rendering in Bokeh:
(1) a high-level <a class="reference internal" href="#recipes-interface">Recipes Interface</a> that provides common abstract rendering
configurations with good defaults and only optional parameterization
and (2) a low-level <a class="reference internal" href="#functions-interface">Functions Interface</a> that provides access to the details
of the abstract rendering process.
The recipes interface actually produces elements in the low-level
interface, but through a level of indirection to simplify construction.</p>
<p>At a high level, all abstract rendering applications start with a plot.
Abstract rendering takes the plot and renders it to a canvas that uses
data values instead of colors and bins instead of pixels. With the data
values collected into bins, the plot can be analyzed and transformed to
ensure the true nature of the underlying data source is preserved.
This second step is referred to as &#8216;shading&#8217;
(older versions of abstract rendering called this step &#8216;transfer&#8217;,
but the current version is more general and thus the name change).</p>
<p>The abstract rendering interfaces take an existing Bokeh plot as a parameter.
They produce binning and shading processes, which are  attached to a data source.
They also produce a new plot to consume the results of the shading.
and produce a new plot. By default, the old plot is removed.
Abstract rendering is tied to the bokeh server infrastructure, and can
thus only be used with an active bokeh server and with plots employing
a ServerDataSource.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Because abstract rendering relies on server-side processing, it will only
work with bokeh server.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Because abstract rendering uses some functions from the <cite>scipy.misc</cite>
module in its internal machinery, you need to install PIL (or Pillow) to make
it work. These libraries are not a dependency of SciPy and therefore, in general,
some of the functions from this module are not available on systems that don’t
have PIL (or Pillow) installed.</p>
</div>
<div class="section" id="recipes-interface">
<h2><a class="toc-backref" href="#id1">Recipes Interface</a><a class="headerlink" href="#recipes-interface" title="Permalink to this headline">¶</a></h2>
<p>Abstract rendering recipes provide simplified access to common abstract
rendering operations.  The recipes interface is declarative,
in that a high-level operation is requested and the abstract rendering
system constructs the proper low-level function combinations.
Abstract rendering recipe usage can be found
in census.py and abstractrender.py (in examples/plotting/server).</p>
<div class="section" id="heatmap">
<h3><a class="toc-backref" href="#id2">heatmap</a><a class="headerlink" href="#heatmap" title="Permalink to this headline">¶</a></h3>
<p>Heatmap converts a plot of points into a plot of densities.
The most common scenario is a recipes with one item type and overplotting issues.
Adjacency-matrix based graph visualizations also benefit from a heatmap if there is more than one node per pixel row/col.
The basic process is that each bin collects the count of the number of items
that fall into the bin.  After that, a color scale is constructed that ensures
the full range of the data covers is covered by the color scale.</p>
<p>Heatmap is applicable when there is only one category and when the spatial
distribution of items is of interest. In many ways, it is a replacement for
alpha composition, but more flexible.  It should be used when the dynamic
range of color composition of the visualization is essential to interpretation.
The color scale can be perceptually corrected
and include a large step from  zero items to many (to ensure visibility of outliers).</p>
<p>Example heatmap:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">source</span> <span class="o">=</span> <span class="n">ServerDataSource</span><span class="p">(</span><span class="n">data_url</span><span class="o">=</span><span class="s">&quot;/defaultuser/CensusTracts.hdf5&quot;</span><span class="p">,</span>
                          <span class="n">owner_username</span><span class="o">=</span><span class="s">&quot;defaultuser&quot;</span><span class="p">)</span>
<span class="n">plot</span> <span class="o">=</span> <span class="n">square</span><span class="p">(</span> <span class="s">&#39;LON&#39;</span><span class="p">,</span> <span class="s">&#39;LAT&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>
<span class="n">ar</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">plot</span><span class="p">,</span> <span class="n">spread</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;Census Tracts (Server Colors)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/census_server.png" class="align-center" src="../../_images/census_server.png" />
<p>Heatmap can be controlled with the following parameters:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">spread</span></tt> &#8212; Spread values out after binning.  This is used for post-projection shapes.</li>
<li><tt class="docutils literal"><span class="pre">transform</span></tt> &#8212; Modify counts before building the color ramp?
Valid options include <tt class="docutils literal"><span class="pre">cbrt</span></tt> (default),``log`` and <tt class="docutils literal"><span class="pre">none</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">low</span></tt> &#8212; Color for the least dense bin in server coloring (excluding 0).</li>
<li><tt class="docutils literal"><span class="pre">high</span></tt> &#8212; Color for the most dense bin in server coloring.</li>
<li><tt class="docutils literal"><span class="pre">client_colors</span></tt> &#8212; If set to true, low/high are ignored and coloring is passed off to the client code.</li>
<li><tt class="docutils literal"><span class="pre">palette</span></tt> &#8212; Colors to use if <tt class="docutils literal"><span class="pre">client_colors</span></tt> is true</li>
<li>Parameters understood by &#8216;replot&#8217; in the functions interface may also be used
(thus &#8216;title&#8217; in the example).</li>
</ul>
</div>
<div class="section" id="contours">
<h3><a class="toc-backref" href="#id3">contours</a><a class="headerlink" href="#contours" title="Permalink to this headline">¶</a></h3>
<p>The contours recipe converts a plot of points into ISO contours.
It works on the same principal as the heatmap recipe (binning counts),
but instead of building color ramps, the contours recipe produces
a number of regions representing ranges of counts.</p>
<p>Using the same source plot as in heatmap, contours is applied like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;#C6DBEF&quot;</span><span class="p">,</span> <span class="s">&quot;#9ECAE1&quot;</span><span class="p">,</span> <span class="s">&quot;#6BAED6&quot;</span><span class="p">,</span>
          <span class="s">&quot;#4292C6&quot;</span><span class="p">,</span> <span class="s">&quot;#2171B5&quot;</span><span class="p">,</span> <span class="s">&quot;#08519C&quot;</span><span class="p">,</span> <span class="s">&quot;#08306B&quot;</span><span class="p">]</span>
<span class="n">ar</span><span class="o">.</span><span class="n">contours</span><span class="p">(</span><span class="n">plot</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;ISO Contours&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/census_contours.png" class="align-center" src="../../_images/census_contours.png" />
<p>The contours recipe uses the following parameters:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Palette</span></tt> &#8212; List of colors for each contour, in the desired order.</li>
<li>Parameters understood by &#8216;replot&#8217; in the functions interface may also be used.</li>
</ul>
</div>
<div class="section" id="hdalpha">
<h3><a class="toc-backref" href="#id4">hdalpha</a><a class="headerlink" href="#hdalpha" title="Permalink to this headline">¶</a></h3>
<p>HDAlpha converts a plot of points into a plot of densities, just like heatmap.
However, heatmap is restricted to a single category, while hdalpha works with multiple categories of data.
The hdalpha recipe is useful for scatterplots with multiple categories or
geo-located event data where events are of different types.
In the hdalpha recipe, categories are binned separately and a color ramp is made for each category.
Additionally, the composition between categories is also controlled to prevent over-saturation.</p>
<p>Example application of hdalpha:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">source</span> <span class="o">=</span> <span class="n">ServerDataSource</span><span class="p">(</span><span class="n">data_url</span><span class="o">=</span><span class="s">&quot;fn://gauss&quot;</span><span class="p">,</span> <span class="n">owner_username</span><span class="o">=</span><span class="s">&quot;defaultuser&quot;</span><span class="p">)</span>
<span class="n">plot</span> <span class="o">=</span> <span class="n">square</span><span class="p">(</span><span class="s">&#39;oneA&#39;</span><span class="p">,</span> <span class="s">&#39;oneB&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;cats&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>
<span class="n">ar</span><span class="o">.</span><span class="n">hdalpha</span><span class="p">(</span><span class="n">plot</span><span class="p">,</span> <span class="n">spread</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;Multiple categories&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The parameters for hdalpha are the same as for contours, except
that <tt class="docutils literal"><span class="pre">palette</span></tt> determines the number categories instead of the number
of contours.  If more categories are found than colors provided,
all additional categories are combined into the last category.</p>
</div>
</div>
<div class="section" id="functions-interface">
<h2><a class="toc-backref" href="#id5">Functions Interface</a><a class="headerlink" href="#functions-interface" title="Permalink to this headline">¶</a></h2>
<p>The functional interface for abstract rendering provides a set of building blocks for
creating and performing analysis on binned values.  In this interface, you have the
opportunity to specify the steps of any analysis and full control over the parametrization.
In exchange, an understanding of the control flow and execution model in abstract rendering
is required.</p>
<p>Abstract rendering is configured via the &#8216;replot&#8217; function.
Replot takes a plot and an abstract rendering configuration as arguments
and produces a new plot.  It is the primitive which the recipes rely on
(in fact, extra arguments passed to recipes will be sent to replot).
The abstract rendering configuration breaks down into four function roles.</p>
<p>The function roles are:</p>
<ul class="simple">
<li>selector &#8212; Determines which bins are associated with a glyph in the visualization</li>
<li>info &#8212; Determines which value goes into the bin for a given glyph</li>
<li>aggregator &#8212; Combines new values (from info) with the existing value of the bin</li>
<li>shader &#8212; Transforms a set of bins.  Shaders may be chained in many cases.</li>
</ul>
<p>In replot, the selector is determined either indirectly through the plot or via
the <tt class="docutils literal"><span class="pre">points</span></tt> flag.  If <tt class="docutils literal"><span class="pre">points</span></tt> is set, then all geometry of the plot is interpreted
as points that touch only one bin.  Otherwise, the shape-type of the source plot
will be used.</p>
<p>The info function refers back to the data source of the original plot. The row
related to the current shape is used as its argument. Since counts are common,
the default info function is <tt class="docutils literal"><span class="pre">Const(1)</span></tt>, which always returns the value <tt class="docutils literal"><span class="pre">1</span></tt>.
The info function is commonly used for categorization of the input glyphs.</p>
<p>The aggregator builds bin values from info values and an existing bin.
Count and CountCategories are the current aggregators.</p>
<p>Shaders transform sets of bins.  The most common target is a new set of bins.
The output set of bins may be anything, though numbers and colors
are the most common.  Shader chains that end in grids of numbers rely
on the BokehJS client to do coloring.  Any chain that results in a grid of bins can be
extended with additional shaders.  In contrast, the Contours shader produces sets of lines
instead of a new grid of bins.</p>
<p>Here is a re-creation of the <a class="reference internal" href="#heatmap">heatmap</a> recipe using the functions interface:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">source</span> <span class="o">=</span> <span class="n">ServerDataSource</span><span class="p">(</span><span class="n">data_url</span><span class="o">=</span><span class="s">&quot;/defaultuser/CensusTracts.hdf5&quot;</span><span class="p">,</span>
                          <span class="n">owner_username</span><span class="o">=</span><span class="s">&quot;defaultuser&quot;</span><span class="p">)</span>
<span class="n">plot</span> <span class="o">=</span> <span class="n">square</span><span class="p">(</span> <span class="s">&#39;LON&#39;</span><span class="p">,</span> <span class="s">&#39;LAT&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>
<span class="n">ar</span><span class="o">.</span><span class="n">replot</span><span class="p">(</span><span class="n">plot</span><span class="p">,</span>
          <span class="n">info</span><span class="o">=</span><span class="n">ar</span><span class="o">.</span><span class="n">Const</span><span class="p">(</span><span class="n">val</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
          <span class="n">agg</span><span class="o">=</span><span class="n">ar</span><span class="o">.</span><span class="n">Count</span><span class="p">(),</span>
          <span class="n">shader</span><span class="o">=</span><span class="n">ar</span><span class="o">.</span><span class="n">Spread</span><span class="p">(</span><span class="n">factor</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
                   <span class="o">+</span> <span class="n">ar</span><span class="o">.</span><span class="n">Cuberoot</span><span class="p">()</span>  <span class="c"># Approximates perceptual correction</span>
                   <span class="o">+</span> <span class="n">ar</span><span class="o">.</span><span class="n">InterpolateColor</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">),</span> <span class="n">high</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
          <span class="n">points</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
          <span class="n">reserve_val</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>The list of available functions
and their relevant parameters is growing all the time. Please see
the docstrings for details.  The above example is also found
in abstractrender.py (in examples/plotting/server).</p>
</div>
<div class="section" id="publications">
<h2><a class="toc-backref" href="#id6">Publications</a><a class="headerlink" href="#publications" title="Permalink to this headline">¶</a></h2>
<p>Abstract rendering is also an active research project.  If you would like more
information,  the follow publications provide information on the experimental system
and the capabilities that may eventually be included in Bokeh through abstract rendering.</p>
<ul class="simple">
<li><a class="reference external" href="http://www.crest.iu.edu/publications/prints/2014/Cottam2014OutOfCore.pdf">Abstract Rendering: Out-of-core Rendering for Information Visualization</a>
(SPIE Conference on Visualization and Data Analysis 2014)</li>
<li><a class="reference external" href="http://www.crest.iu.edu/publications/prints/2013/Cottam2013AR.pdf">Overplotting: Unified solutions under Abstract Rendering</a>
(The first workshop on Big Data Visualization, IEEE Big Data 2012)</li>
</ul>
</div>
<div class="section" id="limitations">
<h2><a class="toc-backref" href="#id7">Limitations</a><a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Abstract rendering fully supports circle and square glyph types
in scatter plots.  More complex shapes and lines cannot
used in the input plot at this time.</li>
<li>If a plot is constructed with multiple layers, only the first layer using a ServerDataSource
can use abstract rendering.</li>
</ul>
</div>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      <a href="widgets.html">Prev</a> |
      
      
      <a href="examples.html">Next</a> |
      
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../_sources/docs/user_guide/ar.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2013, Anaconda.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.<br/>
    </p>
  </div>
</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27761864-7', 'pydata.org');
  ga('user.set', 'anonymizeIp', true);ga('send', 'pageview');
</script>


  </body>
</html>