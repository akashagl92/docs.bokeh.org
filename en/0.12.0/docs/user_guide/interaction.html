<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>Bokeh Docs</title>
  <meta name="description" content="Bokeh visualization library, documentation site.">
  <meta name="author" content="Bokeh contributors">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600%7CNoto+Sans:400,700' rel='stylesheet' type='text/css'>

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="https://static.bokeh.org/bokehplots_archive/main.css">


  <!-- Scripts
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script type="text/javascript">
    var _BOKEH_CURRENT_VERSION = "0.12.0";
  </script>
  <script src="../../_static/js/main.js"></script>

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="https://static.bokeh.org/favicon/favicon-32x32.png.ico">

  <!-- Canonical
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="canonical" href="http://bokeh.pydata.org/en/latest/docs/user_guide/interaction.html" />

</head>
<body class="">

  <header class="navigation">
    <div class="wrapper">
      <a href="" class="logo">
        <img src="../../_static/images/logo.png" alt="Bokeh Logo">
      </a>
      <a href="" class="navigation-menu logo-text">Bokeh</a>
      <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">Menu</a>
      <nav>
        <ul id="js-navigation-menu" class="navigation-menu show">
          
              <li class="nav-link"><a href="//bokeh.org/">About</a></li>
          
              <li class="nav-link"><a href="/docs/gallery.html">Gallery</a></li>
          
              <li class="nav-link"><a href="//bokeh.pydata.org/en/latest/">Docs</a></li>
          
              <li class="nav-link"><a href="//github.com/bokeh/bokeh">Github</a></li>
          
        </ul>
      </nav>
    </div>
  </header>
  <div class="second-nav">
    <nav>
      <ul class="navigation-menu show">
        <li class="nav-link more"><a href="../../index.html">0.12.0</a>
            <ul class="submenu">
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/0.11.1/">0.11.1</a></li>
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/0.11.1/">0.11.1</a></li>
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/0.11.0/">0.11.0</a></li>
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/0.10.0/">0.10.0</a></li>
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/0.9.3/">0.9.3</a></li>
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/0.8.2/">0.8.2</a></li>
              
            </ul>
        </li>
            <li class="nav-link doc-head"><a href="../installation.html">Installation</a></li>
            <li class="nav-link doc-head"><a href="../user_guide.html">User Guide</a></li>
            <li class="nav-link doc-head"><a href="../gallery.html">Gallery</a></li>
            <li class="nav-link doc-head"><a href="../reference.html">Reference</a></li>
            <li class="nav-link doc-head"><a href="../releases/0.12.0.html">Releases</a></li>
            <li class="nav-link doc-head"><a href="../dev_guide.html">Developer Guide</a></li>
      </ul>
    </nav>
    <div class="navigation-tools">
      <div class="search-bar">
  <form role="search" action="../../search.html" method="get">
    <input type="search" name="q" placeholder="Search" />
    <button type="submit">
      <img src="https://raw.githubusercontent.com/thoughtbot/refills/master/source/images/search-icon-black.png" alt="Search Icon">
    </button>
  </form>
</div>
    </div>
  </div>

<!-- MAIN BODY OF DOCS –––––––––––––––––– -->
  <div class="docs section">
    <div class="toc">
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Getting Set Up</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Defining Key Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting.html">Plotting with Basic Glyphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="charts.html">Making High-level Charts</a></li>
<li class="toctree-l1"><a class="reference internal" href="compat.html">Leveraging Other Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="styling.html">Styling Visual Attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Configuring Plot Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="layout.html">Laying out Plots and Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebook.html">Working in the Notebook</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Adding Interactions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#linking-plots">Linking Plots</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#linked-panning">Linked Panning</a></li>
<li class="toctree-l3"><a class="reference internal" href="#linked-brushing">Linked Brushing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#adding-widgets">Adding Widgets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#button">Button</a></li>
<li class="toctree-l3"><a class="reference internal" href="#checkbox-button-group">Checkbox Button Group</a></li>
<li class="toctree-l3"><a class="reference internal" href="#checkbox-group">Checkbox Group</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-table">Data Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dropdown-menu">Dropdown Menu</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multiselect">MultiSelect</a></li>
<li class="toctree-l3"><a class="reference internal" href="#radio-button-group">Radio Button Group</a></li>
<li class="toctree-l3"><a class="reference internal" href="#radio-group">Radio Group</a></li>
<li class="toctree-l3"><a class="reference internal" href="#select">Select</a></li>
<li class="toctree-l3"><a class="reference internal" href="#slider">Slider</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tab-panes">Tab Panes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#textinput">TextInput</a></li>
<li class="toctree-l3"><a class="reference internal" href="#toggle-button">Toggle Button</a></li>
<li class="toctree-l3"><a class="reference internal" href="#div">Div</a></li>
<li class="toctree-l3"><a class="reference internal" href="#paragraph">Paragraph</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pretext">PreText</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#javascript-callbacks">JavaScript Callbacks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#openurl">OpenURL</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customjs-for-widgets">CustomJS for Widgets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customjs-for-tools">CustomJS for Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customjs-for-selections">CustomJS for Selections</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customjs-for-hover">CustomJS for Hover</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customjs-for-range-update">CustomJS for Range Update</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customjs-with-a-python-function">CustomJS with a Python function</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Using <code class="docutils literal"><span class="pre">bokeh</span></code> Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="server.html">Running a Bokeh Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="embed.html">Embedding Plots and Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="webgl.html">Speeding up with WebGL</a></li>
<li class="toctree-l1"><a class="reference internal" href="geo.html">Mapping Geo Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="bokehjs.html">Developing with JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions.html">Extending Bokeh</a></li>
<li class="toctree-l1"><a class="reference internal" href="info.html">Learning More</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/bokeh.html"><code class="docutils literal"><span class="pre">bokeh</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/charts.html"><code class="docutils literal"><span class="pre">bokeh.charts</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/client.html"><code class="docutils literal"><span class="pre">bokeh.client</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/core.html"><code class="docutils literal"><span class="pre">bokeh.core</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/document.html"><code class="docutils literal"><span class="pre">bokeh.document</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/driving.html"><code class="docutils literal"><span class="pre">bokeh.driving</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/embed.html"><code class="docutils literal"><span class="pre">bokeh.embed</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/icons.html"><code class="docutils literal"><span class="pre">bokeh.icons</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/io.html"><code class="docutils literal"><span class="pre">bokeh.io</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/layouts.html"><code class="docutils literal"><span class="pre">bokeh.layouts</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/model.html"><code class="docutils literal"><span class="pre">bokeh.model</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/models.html"><code class="docutils literal"><span class="pre">bokeh.models</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/mpl.html"><code class="docutils literal"><span class="pre">bokeh.mpl</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/palettes.html"><code class="docutils literal"><span class="pre">bokeh.palettes</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/plotting.html"><code class="docutils literal"><span class="pre">bokeh.plotting</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/resources.html"><code class="docutils literal"><span class="pre">bokeh.resources</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/sampledata.html"><code class="docutils literal"><span class="pre">bokeh.sampledata</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/server.html"><code class="docutils literal"><span class="pre">bokeh.server</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/settings.html"><code class="docutils literal"><span class="pre">bokeh.settings</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/sphinxext.html"><code class="docutils literal"><span class="pre">bokeh.sphinxext</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/themes.html"><code class="docutils literal"><span class="pre">bokeh.themes</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/tile_providers.html"><code class="docutils literal"><span class="pre">bokeh.tile_providers</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/util.html"><code class="docutils literal"><span class="pre">bokeh.util</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.11.1.html">0.11.1 (Feb 2016)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.11.0.html">0.11.0 (Jan 2016)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.10.0.html">0.10.0 (Sep 2015)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.9.3.html">0.9.3 (Aug 2015)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.9.2.html">0.9.2 (Jul 2015)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.9.1.html">0.9.1 (Jul 2015)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.9.0.html">0.9.0 (May 2015)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.8.2.html">0.8.2 (Mar 2015)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.8.1.html">0.8.1 (Feb 2015)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.8.0.html">0.8.0 (Feb 2015)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.7.1.html">0.7.1 (Jan 2015)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.7.0.html">0.7.0 (Dec 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.6.1.html">0.6.1 (Sep 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.6.0.html">0.6.0 (Sep 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.5.2.html">0.5.2 (Aug 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.5.1.html">0.5.1 (Jul 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.5.0.html">0.5.0 (Jul 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.4.4.html">0.4.4 (Apr 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.4.2.html">0.4.2 (Mar 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.4.1.html">0.4.1 (Feb 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.4.0.html">0.4.0 (Feb 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.3.0.html">0.3.0 (Nov 2013)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.2.0.html">0.2.0 (Oct 2013)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.1.0.html">0.1.0 (Apr 2013)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/setup.html">Getting Set Up</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/env_vars.html">Environment Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/models.html">Bokeh Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/server.html">Server Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/bindings.html">Language Bindings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/bokehjs.html">BokehJS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/notes.html">Notes</a></li>
</ul>

    </div>
    <div class="content">
        
  <div class="section" id="adding-interactions">
<span id="userguide-interaction"></span><h1>Adding Interactions<a class="headerlink" href="#adding-interactions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="linking-plots">
<span id="userguide-interaction-linking"></span><h2>Linking Plots<a class="headerlink" href="#linking-plots" title="Permalink to this headline">¶</a></h2>
<p>It&#8217;s often useful to link plots to add connected interactivity between plots.
This section shows an easy way to do it using the <a class="reference internal" href="../reference/plotting.html#bokeh-plotting"><span class="std std-ref">bokeh.plotting</span></a> interface.</p>
<div class="section" id="linked-panning">
<span id="userguide-interaction-linked-panning"></span><h3>Linked Panning<a class="headerlink" href="#linked-panning" title="Permalink to this headline">¶</a></h3>
<p>It&#8217;s often desired to link pan or zooming actions across many plots. All that is
needed to enable this feature is to share range objects between <code class="xref py py-func docutils literal"><span class="pre">figure()</span></code>
calls.</p>
<div class="highlight-python" id="interaction.rst.bokeh-plot-0"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">gridplot</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;panning.html&quot;</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span>
<span class="n">y0</span> <span class="o">=</span> <span class="n">x</span>
<span class="n">y1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="o">-</span><span class="n">xx</span> <span class="k">for</span> <span class="n">xx</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
<span class="n">y2</span> <span class="o">=</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">xx</span><span class="o">-</span><span class="mi">5</span><span class="p">)</span> <span class="k">for</span> <span class="n">xx</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>

<span class="c1"># create a new plot</span>
<span class="n">s1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="n">s1</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;navy&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="c1"># create a new plot and share both ranges</span>
<span class="n">s2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">x_range</span><span class="o">=</span><span class="n">s1</span><span class="o">.</span><span class="n">x_range</span><span class="p">,</span> <span class="n">y_range</span><span class="o">=</span><span class="n">s1</span><span class="o">.</span><span class="n">y_range</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="n">s2</span><span class="o">.</span><span class="n">triangle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;firebrick&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="c1"># create a new plot and share only one range</span>
<span class="n">s3</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">x_range</span><span class="o">=</span><span class="n">s1</span><span class="o">.</span><span class="n">x_range</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="n">s3</span><span class="o">.</span><span class="n">square</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;olive&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">gridplot</span><span class="p">([[</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">s3</span><span class="p">]],</span> <span class="n">toolbar_location</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

<span class="c1"># show the results</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>

<div class="bk-root">
    
    <script
        src="bokeh-plot-ad74b39b96f9ffafde8c65eff585dcb9.js"
        id="0772aa73-ccb2-484f-ade6-c8a5c02a35b7"
        data-bokeh-model-id="a86dab98-f2aa-45e2-8704-998608f2ff56"
        data-bokeh-doc-id="02d69557-33f0-45b8-a76b-3441b0886959"
    ></script>
</div><p>Now you have learned how to link panning between multiple plots with the
<a class="reference internal" href="../reference/plotting.html#bokeh-plotting"><span class="std std-ref">bokeh.plotting</span></a> interface.</p>
</div>
<div class="section" id="linked-brushing">
<span id="userguide-interaction-linked-brushing"></span><h3>Linked Brushing<a class="headerlink" href="#linked-brushing" title="Permalink to this headline">¶</a></h3>
<p>Linked brushing in Bokeh is expressed by sharing data sources between glyph
renderers. This is all Bokeh needs to understand that selections acted on one
glyph must pass to all other glyphs that share that same source.</p>
<p>The following code shows an example of linked brushing between circle glyphs on
two different <code class="xref py py-func docutils literal"><span class="pre">figure()</span></code> calls.</p>
<div class="highlight-python" id="interaction.rst.bokeh-plot-1"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">gridplot</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;brushing.html&quot;</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">))</span>
<span class="n">y0</span> <span class="o">=</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">xx</span><span class="p">)</span> <span class="k">for</span> <span class="n">xx</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
<span class="n">y1</span> <span class="o">=</span> <span class="p">[</span><span class="n">xx</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">xx</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>

<span class="c1"># create a column data source for the plots to share</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y0</span><span class="o">=</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="o">=</span><span class="n">y1</span><span class="p">))</span>

<span class="n">TOOLS</span> <span class="o">=</span> <span class="s2">&quot;box_select,lasso_select,help&quot;</span>

<span class="c1"># create a new plot and add a renderer</span>
<span class="n">left</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">tools</span><span class="o">=</span><span class="n">TOOLS</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="n">left</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y0&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># create another new plot and add a renderer</span>
<span class="n">right</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">tools</span><span class="o">=</span><span class="n">TOOLS</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="n">right</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y1&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">gridplot</span><span class="p">([[</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">]])</span>

<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>

<div class="bk-root">
    
    <script
        src="bokeh-plot-a4e41f7730c8e10aa46e2d5aea4db806.js"
        id="ee6ef533-4c1b-41a2-81c6-dfbde42af929"
        data-bokeh-model-id="64ed53fc-41d7-480b-907d-d40e64ff5496"
        data-bokeh-doc-id="d6be4942-bea3-4f01-9248-cda20bba7b6f"
    ></script>
</div><p>Now you have learned how to link brushing between plots.</p>
</div>
</div>
<div class="section" id="adding-widgets">
<span id="userguide-interaction-widgets"></span><h2>Adding Widgets<a class="headerlink" href="#adding-widgets" title="Permalink to this headline">¶</a></h2>
<p>Widgets are interactive controls that can be added to Bokeh applications to
provide a front end user interface to a visualization. They can drive new computations,
update plots, and connect to other programmatic functionality. When used with the
Bokeh server, widgets can run arbitrary Python code, enabling complex applications.
Widgets can also be used without the Bokeh server in standalone HTML documents through the
browser&#8217;s Javascript runtime.</p>
<p>To use widgets, you must add them to your document and define their functionality.
Widgets can be added directly to the document root or nested inside a layout. There
are two ways to program a widget&#8217;s functionality:</p>
<blockquote>
<div><ul class="simple">
<li>Use the <code class="docutils literal"><span class="pre">CustomJS</span></code> callback (see <a class="reference internal" href="#userguide-interaction-actions-widget-callbacks"><span class="std std-ref">CustomJS for Widgets</span></a>). This will work in standalone HTML documents.</li>
<li>Use <code class="docutils literal"><span class="pre">bokeh</span> <span class="pre">serve</span></code> to start the Bokeh server and set up event handlers with <code class="docutils literal"><span class="pre">.on_change</span></code> (or for some widgets, <code class="docutils literal"><span class="pre">.on_click</span></code>).</li>
</ul>
</div></blockquote>
<p>Event handlers are user-defined Python functions that can be attached to widgets. These functions are
then called when certain attributes on the widget are changed. The necessary function
signature of event handlers is determined by how they are attached to widgets (whether they
are passed through <code class="docutils literal"><span class="pre">.on_change</span></code> or <code class="docutils literal"><span class="pre">.on_click</span></code>).</p>
<p>All widgets have an <code class="docutils literal"><span class="pre">.on_change</span></code> method that takes an attribute name and one or more event handlers as
parameters. These handlers are expected to have the function signature, <code class="docutils literal"><span class="pre">(attr,</span> <span class="pre">old,</span> <span class="pre">new)</span></code>,
where <code class="docutils literal"><span class="pre">attr</span></code> refers to the changed attribute&#8217;s name, and <code class="docutils literal"><span class="pre">old</span></code> and <code class="docutils literal"><span class="pre">new</span></code> refer to the previous and
updated values of the attribute. <code class="docutils literal"><span class="pre">.on_change</span></code> must be used when you need the previous value of an attribute.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_text_input_handler</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Previous label: &quot;</span> <span class="o">+</span> <span class="n">old</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Updated label: &quot;</span> <span class="o">+</span> <span class="n">new</span><span class="p">)</span>

<span class="n">text_input</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Label:&quot;</span><span class="p">)</span>
<span class="n">text_input</span><span class="o">.</span><span class="n">on_change</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="n">my_text_input_handler</span><span class="p">)</span>
</pre></div>
</div>
<p>Additionally, some widgets, including the button, dropdown, and checkbox, have an <code class="docutils literal"><span class="pre">.on_click</span></code> method that
takes an event handler as its only parameter. For the Button, this handler is called without parameters.
For the other widgets with <code class="docutils literal"><span class="pre">.on_click</span></code>, the handler is passed the new attribute value.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_radio_handler</span><span class="p">(</span><span class="n">new</span><span class="p">):</span>
    <span class="k">print</span> <span class="s1">&#39;Radio button option &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">new</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; selected.&#39;</span>

<span class="n">radio_group</span> <span class="o">=</span> <span class="n">RadioGroup</span><span class="p">(</span>
    <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Option 1&quot;</span><span class="p">,</span> <span class="s2">&quot;Option 2&quot;</span><span class="p">,</span> <span class="s2">&quot;Option 3&quot;</span><span class="p">],</span> <span class="n">active</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">radio_group</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">my_radio_handler</span><span class="p">)</span>
</pre></div>
</div>
<p>Bokeh provides a simple default set of widgets, largely based off the Bootstrap
JavaScript library. In the future, it will be possible for users to wrap and use
other widget libraries, or their own custom widgets.</p>
<p>For more information about the attributes to watch using <code class="docutils literal"><span class="pre">.on_change</span></code> or whether <code class="docutils literal"><span class="pre">.on_click</span></code> is
available, go to the <a class="reference internal" href="../reference.html#refguide"><span class="std std-ref">Reference Guide</span></a>. Widgets can be found under <a class="reference internal" href="../reference/models.html#bokeh-models"><span class="std std-ref">bokeh.models</span></a>.</p>
<div class="section" id="button">
<h3>Button<a class="headerlink" href="#button" title="Permalink to this headline">¶</a></h3>
<p>Bokeh provides a simple Button:</p>

<div class="bk-root">
    
    <script
        src="bokeh-plot-385ad5743c40e10c5e4f1dfeaab47380.js"
        id="33e08605-ba2f-45d1-8933-08571ab50c36"
        data-bokeh-model-id="fa41caeb-0406-4cc7-880c-91c04c1ae2d4"
        data-bokeh-doc-id="799d8097-4528-4d3d-b6a1-48f03a327e46"
    ></script>
</div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">Button</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;button.html&quot;</span><span class="p">)</span>

<span class="n">button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Foo&quot;</span><span class="p">,</span> <span class="n">button_type</span><span class="o">=</span><span class="s2">&quot;success&quot;</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">button</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="checkbox-button-group">
<h3>Checkbox Button Group<a class="headerlink" href="#checkbox-button-group" title="Permalink to this headline">¶</a></h3>
<p>Bokeh also provides a checkbox button group, that can have multiple options
selected simultaneously:</p>

<div class="bk-root">
    
    <script
        src="bokeh-plot-e8489acd6401e79ea7885bda0ae079be.js"
        id="856be89f-7626-4443-9e2a-2a1f305ba482"
        data-bokeh-model-id="c2f804df-4521-4940-a3d8-222160d1288b"
        data-bokeh-doc-id="e26ca60c-a1e4-4c9e-942e-71cc43981e75"
    ></script>
</div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">CheckboxButtonGroup</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;checkbox_button_group.html&quot;</span><span class="p">)</span>

<span class="n">checkbox_button_group</span> <span class="o">=</span> <span class="n">CheckboxButtonGroup</span><span class="p">(</span>
        <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Option 1&quot;</span><span class="p">,</span> <span class="s2">&quot;Option 2&quot;</span><span class="p">,</span> <span class="s2">&quot;Option 3&quot;</span><span class="p">],</span> <span class="n">active</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="n">show</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">checkbox_button_group</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="checkbox-group">
<h3>Checkbox Group<a class="headerlink" href="#checkbox-group" title="Permalink to this headline">¶</a></h3>
<p>A standard checkbox:</p>

<div class="bk-root">
    
    <script
        src="bokeh-plot-f4e6576f6a50af1ac0b41b5264c67edf.js"
        id="fc9ce590-891b-4a9e-bb61-c974ddae7f51"
        data-bokeh-model-id="37679f75-375e-4c16-bcfa-a6a4992e09d7"
        data-bokeh-doc-id="ebbc2830-5466-43d2-b40a-0950be167ed5"
    ></script>
</div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">CheckboxGroup</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;checkbox_group.html&quot;</span><span class="p">)</span>

<span class="n">checkbox_group</span> <span class="o">=</span> <span class="n">CheckboxGroup</span><span class="p">(</span>
        <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Option 1&quot;</span><span class="p">,</span> <span class="s2">&quot;Option 2&quot;</span><span class="p">,</span> <span class="s2">&quot;Option 3&quot;</span><span class="p">],</span> <span class="n">active</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="n">show</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">checkbox_group</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="data-table">
<h3>Data Table<a class="headerlink" href="#data-table" title="Permalink to this headline">¶</a></h3>
<p>Bokeh provides a sophisticated data table widget based on SlickGrid. Note
that since the table is configured with a data source object, any plots that
share this data source will automatically have selections linked between the
plot and the table (even in static HTML documents).</p>

<div class="bk-root">
    
    <script
        src="bokeh-plot-1bb454c57e35fd82b4fbedaab6655ad3.js"
        id="04e165a7-ad67-4c9a-bb64-622a74449279"
        data-bokeh-model-id="2efaba22-bfb0-4735-9d8a-aed19888ed22"
        data-bokeh-doc-id="b1708b31-fb27-4dd4-87b4-49c0fa0e14d4"
    ></script>
</div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>

<span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span>
<span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">DataTable</span><span class="p">,</span> <span class="n">DateFormatter</span><span class="p">,</span> <span class="n">TableColumn</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;data_table.html&quot;</span><span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">dates</span><span class="o">=</span><span class="p">[</span><span class="n">date</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)],</span>
        <span class="n">downloads</span><span class="o">=</span><span class="p">[</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)],</span>
    <span class="p">)</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">TableColumn</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">&quot;dates&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="n">formatter</span><span class="o">=</span><span class="n">DateFormatter</span><span class="p">()),</span>
        <span class="n">TableColumn</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s2">&quot;downloads&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Downloads&quot;</span><span class="p">),</span>
    <span class="p">]</span>
<span class="n">data_table</span> <span class="o">=</span> <span class="n">DataTable</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">280</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">data_table</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="dropdown-menu">
<h3>Dropdown Menu<a class="headerlink" href="#dropdown-menu" title="Permalink to this headline">¶</a></h3>
<p>It is also possible to include Dropdown menus:</p>

<div class="bk-root">
    
    <script
        src="bokeh-plot-81ac0984dcf163ea6ce4fea1dcf7acfd.js"
        id="ea922b10-e430-4411-98af-4bf7cb1c75ee"
        data-bokeh-model-id="4d8d5f7c-1b44-4e5c-a969-84533903dd2d"
        data-bokeh-doc-id="cb210e65-50a3-4597-bdc1-c910091b2faf"
    ></script>
</div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">Dropdown</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;dropdown.html&quot;</span><span class="p">)</span>

<span class="n">menu</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;Item 1&quot;</span><span class="p">,</span> <span class="s2">&quot;item_1&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;Item 2&quot;</span><span class="p">,</span> <span class="s2">&quot;item_2&quot;</span><span class="p">),</span> <span class="bp">None</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;Item 3&quot;</span><span class="p">,</span> <span class="s2">&quot;item_3&quot;</span><span class="p">)]</span>
<span class="n">dropdown</span> <span class="o">=</span> <span class="n">Dropdown</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Dropdown button&quot;</span><span class="p">,</span> <span class="n">button_type</span><span class="o">=</span><span class="s2">&quot;warning&quot;</span><span class="p">,</span> <span class="n">menu</span><span class="o">=</span><span class="n">menu</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">dropdown</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="multiselect">
<h3>MultiSelect<a class="headerlink" href="#multiselect" title="Permalink to this headline">¶</a></h3>
<p>A multi-select widget to present multiple available options:</p>

<div class="bk-root">
    
    <script
        src="bokeh-plot-febd7536635a8afdb922558a68c34561.js"
        id="c150b89e-4078-4902-af42-f69f44863d76"
        data-bokeh-model-id="077be733-620a-4ed4-8a16-4041f9200e71"
        data-bokeh-doc-id="eb3087fa-a798-42c9-ba42-3707a7430312"
    ></script>
</div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">MultiSelect</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;multi_select.html&quot;</span><span class="p">)</span>

<span class="n">multi_select</span> <span class="o">=</span> <span class="n">MultiSelect</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Option:&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;quux&quot;</span><span class="p">],</span>
                           <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;baz&quot;</span><span class="p">,</span> <span class="s2">&quot;quux&quot;</span><span class="p">])</span>

<span class="n">show</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">multi_select</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="radio-button-group">
<h3>Radio Button Group<a class="headerlink" href="#radio-button-group" title="Permalink to this headline">¶</a></h3>
<p>A radio button group can have at most one selected button at at time:</p>

<div class="bk-root">
    
    <script
        src="bokeh-plot-4a0c999a9f4006fe110168c173958d07.js"
        id="3397e642-74db-4ffd-81d5-d33148425ece"
        data-bokeh-model-id="e0cbddbe-54f1-46e3-a646-185c9df1adb1"
        data-bokeh-doc-id="e6add69f-916a-47db-a4fb-4d69b7d2f9f8"
    ></script>
</div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">RadioButtonGroup</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;radio_button_group.html&quot;</span><span class="p">)</span>

<span class="n">radio_button_group</span> <span class="o">=</span> <span class="n">RadioButtonGroup</span><span class="p">(</span>
        <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Option 1&quot;</span><span class="p">,</span> <span class="s2">&quot;Option 2&quot;</span><span class="p">,</span> <span class="s2">&quot;Option 3&quot;</span><span class="p">],</span> <span class="n">active</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">radio_button_group</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="radio-group">
<h3>Radio Group<a class="headerlink" href="#radio-group" title="Permalink to this headline">¶</a></h3>
<p>A radio group uses standard radio button appearance:</p>

<div class="bk-root">
    
    <script
        src="bokeh-plot-ba8c90ba8688bc50bc667bb9e1387e25.js"
        id="42a90ea2-c109-4659-90fc-c83da0914198"
        data-bokeh-model-id="f32c178b-da85-4edd-b9c0-f790f9694ba8"
        data-bokeh-doc-id="38018353-75df-45e5-9b2a-472a2074f89b"
    ></script>
</div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">RadioGroup</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;radio_group.html&quot;</span><span class="p">)</span>

<span class="n">radio_group</span> <span class="o">=</span> <span class="n">RadioGroup</span><span class="p">(</span>
        <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Option 1&quot;</span><span class="p">,</span> <span class="s2">&quot;Option 2&quot;</span><span class="p">,</span> <span class="s2">&quot;Option 3&quot;</span><span class="p">],</span> <span class="n">active</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">radio_group</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="select">
<h3>Select<a class="headerlink" href="#select" title="Permalink to this headline">¶</a></h3>
<p>A single selection widget:</p>

<div class="bk-root">
    
    <script
        src="bokeh-plot-3c71eb4b6b570effabfaedd772af0b4a.js"
        id="a9f5fb74-7f7c-42d1-af4e-289381f202e2"
        data-bokeh-model-id="2a42724c-9db0-4a3f-a481-8f8ee80972a5"
        data-bokeh-doc-id="672328c0-08d9-4e4f-b08f-2af8d7fa6c90"
    ></script>
</div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">Select</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;select.html&quot;</span><span class="p">)</span>

<span class="n">select</span> <span class="o">=</span> <span class="n">Select</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Option:&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;baz&quot;</span><span class="p">,</span> <span class="s2">&quot;quux&quot;</span><span class="p">])</span>

<span class="n">show</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">select</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="slider">
<h3>Slider<a class="headerlink" href="#slider" title="Permalink to this headline">¶</a></h3>
<p>The Bokeh slider can be configured with <code class="docutils literal"><span class="pre">start</span></code> and <code class="docutils literal"><span class="pre">end</span></code> values, a <code class="docutils literal"><span class="pre">step</span></code> size,
an initial <code class="docutils literal"><span class="pre">value</span></code> and a <code class="docutils literal"><span class="pre">title</span></code>:</p>

<div class="bk-root">
    
    <script
        src="bokeh-plot-47b6d44047008009c5897a3c3b7c27ab.js"
        id="f8912d30-e46a-4527-86f7-c70e71da42b5"
        data-bokeh-model-id="e797c060-50f7-41ea-b788-2cd85be9fa92"
        data-bokeh-doc-id="4a812e14-59ef-4db9-813c-96552a2cd965"
    ></script>
</div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">Slider</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;slider.html&quot;</span><span class="p">)</span>

<span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">step</span><span class="o">=.</span><span class="mi">1</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Stuff&quot;</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">slider</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="tab-panes">
<h3>Tab Panes<a class="headerlink" href="#tab-panes" title="Permalink to this headline">¶</a></h3>
<p>Tab panes allow multiple plots or layouts to be show in selectable tabs:</p>

<div class="bk-root">
    
    <script
        src="bokeh-plot-37fe096f0c7bde9f7a091432b44f3d1c.js"
        id="93fd59ba-7fcc-4443-aed2-47bbab3a588c"
        data-bokeh-model-id="c8046f89-604a-4570-87ac-e9376c28eb26"
        data-bokeh-doc-id="d9827420-d608-4aa6-b6f6-559071e111be"
    ></script>
</div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">Panel</span><span class="p">,</span> <span class="n">Tabs</span>
<span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;slider.html&quot;</span><span class="p">)</span>

<span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">plot_width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="n">p1</span><span class="o">.</span><span class="n">circle</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;navy&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">tab1</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>

<span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">plot_width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="n">p2</span><span class="o">.</span><span class="n">line</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">line_width</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;navy&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">tab2</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">p2</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;line&quot;</span><span class="p">)</span>

<span class="n">tabs</span> <span class="o">=</span> <span class="n">Tabs</span><span class="p">(</span><span class="n">tabs</span><span class="o">=</span><span class="p">[</span> <span class="n">tab1</span><span class="p">,</span> <span class="n">tab2</span> <span class="p">])</span>

<span class="n">show</span><span class="p">(</span><span class="n">tabs</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="textinput">
<h3>TextInput<a class="headerlink" href="#textinput" title="Permalink to this headline">¶</a></h3>
<p>A widget for collecting a line of text from a user:</p>

<div class="bk-root">
    
    <script
        src="bokeh-plot-9a57bbea9b11939f0864a9a30309c92b.js"
        id="e2e36b4f-184a-48cc-af30-9d0878a70c46"
        data-bokeh-model-id="a98e0873-41e9-4eae-b4a0-5c075553285a"
        data-bokeh-doc-id="e8ca7ee0-fe79-4ca7-a3cd-741d05e2e05b"
    ></script>
</div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">TextInput</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;text_input.html&quot;</span><span class="p">)</span>

<span class="n">text_input</span> <span class="o">=</span> <span class="n">TextInput</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Label:&quot;</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">text_input</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="toggle-button">
<h3>Toggle Button<a class="headerlink" href="#toggle-button" title="Permalink to this headline">¶</a></h3>
<p>The toggle button holds an on/off state:</p>

<div class="bk-root">
    
    <script
        src="bokeh-plot-20b94bdc8a9d1d94f3ff60e86bb49fcb.js"
        id="c0623d09-354f-44c6-917c-cbff27a27f04"
        data-bokeh-model-id="f60830d8-b3bc-4eef-a85a-3753293de822"
        data-bokeh-doc-id="1a91a179-7b88-453d-9111-20ea5e7e9d72"
    ></script>
</div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">Toggle</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;toggle.html&quot;</span><span class="p">)</span>

<span class="n">toggle</span> <span class="o">=</span> <span class="n">Toggle</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Foo&quot;</span><span class="p">,</span> <span class="n">button_type</span><span class="o">=</span><span class="s2">&quot;success&quot;</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">toggle</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="div">
<span id="userguide-interaction-actions"></span><h3>Div<a class="headerlink" href="#div" title="Permalink to this headline">¶</a></h3>
<p>A widget for displaying text that can support HTML in a &lt;div&gt; tag:</p>

<div class="bk-root">
    
    <script
        src="bokeh-plot-9d11ab70bf9da37dc7765e1c5c73739f.js"
        id="487536a1-fc44-46ab-a330-71b2ae930219"
        data-bokeh-model-id="6f5934e3-fe08-4361-b624-3a45723b90c5"
        data-bokeh-doc-id="8c50cb1c-dd9e-48ae-bd76-9953fb2d2003"
    ></script>
</div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">Div</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;div.html&quot;</span><span class="p">)</span>

<span class="n">div</span> <span class="o">=</span> <span class="n">Div</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;Your &lt;a href=&quot;https://en.wikipedia.org/wiki/HTML&quot;&gt;HTML&lt;/a&gt;-supported text is initialized with the &lt;b&gt;text&lt;/b&gt; argument.  The</span>
<span class="s2">remaining div arguments are &lt;b&gt;width&lt;/b&gt; and &lt;b&gt;height&lt;/b&gt;. For this example, those values</span>
<span class="s2">are &lt;i&gt;200&lt;/i&gt; and &lt;i&gt;100&lt;/i&gt; respectively.&quot;&quot;&quot;</span><span class="p">,</span>
<span class="n">width</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">div</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="paragraph">
<h3>Paragraph<a class="headerlink" href="#paragraph" title="Permalink to this headline">¶</a></h3>
<p>A widget for displaying a block of text in an HTML &lt;p&gt; tag:</p>

<div class="bk-root">
    
    <script
        src="bokeh-plot-ae339962966af5d8f8fed12b7a2754dd.js"
        id="ef55a301-f4cb-4f74-86d6-fe06a4cad6eb"
        data-bokeh-model-id="e0c9d660-4c80-4cd5-9a41-458b89f3891e"
        data-bokeh-doc-id="ce340a3a-0694-41da-9fb1-4443e2483720"
    ></script>
</div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">Paragraph</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;div.html&quot;</span><span class="p">)</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">Paragraph</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;Your text is initialized with the &#39;text&#39; argument.  The</span>
<span class="s2">remaining Paragraph arguments are &#39;width&#39; and &#39;height&#39;. For this example, those values</span>
<span class="s2">are 200 and 100 respectively.&quot;&quot;&quot;</span><span class="p">,</span>
<span class="n">width</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="pretext">
<h3>PreText<a class="headerlink" href="#pretext" title="Permalink to this headline">¶</a></h3>
<p>A widget for displaying a block of pre-formatted text in an HTML &lt;pre&gt; tag:</p>

<div class="bk-root">
    
    <script
        src="bokeh-plot-df637484e7251894f361db64ed429e43.js"
        id="1b81a9f0-7314-4951-8f86-a296096f501c"
        data-bokeh-model-id="6be160eb-0a14-47e0-9b86-6529187d64a9"
        data-bokeh-doc-id="0e4cd03a-47b9-46bf-b6c9-9e4195d7dee6"
    ></script>
</div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">widgetbox</span>
<span class="kn">from</span> <span class="nn">bokeh.models.widgets</span> <span class="kn">import</span> <span class="n">PreText</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;div.html&quot;</span><span class="p">)</span>

<span class="n">pre</span> <span class="o">=</span> <span class="n">PreText</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;Your text is initialized with the &#39;text&#39; argument.</span>

<span class="s2">The remaining Paragraph arguments are &#39;width&#39; and &#39;height&#39;. For this example,</span>
<span class="s2">those values are 500 and 100 respectively.&quot;&quot;&quot;</span><span class="p">,</span>
<span class="n">width</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">widgetbox</span><span class="p">(</span><span class="n">pre</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="javascript-callbacks">
<h2>JavaScript Callbacks<a class="headerlink" href="#javascript-callbacks" title="Permalink to this headline">¶</a></h2>
<p>Bokeh exposes various callbacks that can be specified from Python that trigger
actions inside the browser&#8217;s JavaScript runtime. This kind of JavaScript
callback can be used to add interesting interactions to Bokeh documents without
the need to use a Bokeh server (but can also be used in conjuction with a
Bokeh server).</p>
<div class="section" id="openurl">
<span id="userguide-interaction-actions-openurl"></span><h3>OpenURL<a class="headerlink" href="#openurl" title="Permalink to this headline">¶</a></h3>
<p>Opening an URL when users click on a glyph (for instance a circle marker) is
a very popular feature. Bokeh lets users enable this feature by exposing an
OpenURL callback object that can be passed to a Tap tool in order to have that
action called whenever the users clicks on the glyph.</p>
<p>The following code shows how to use the OpenURL action combined with a TapTool
to open an URL whenever the user clicks on a circle.</p>
<div class="highlight-python" id="interaction.rst.bokeh-plot-18"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span><span class="p">,</span> <span class="n">OpenURL</span><span class="p">,</span> <span class="n">TapTool</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;openurl.html&quot;</span><span class="p">)</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">plot_width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
           <span class="n">tools</span><span class="o">=</span><span class="s2">&quot;tap&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Click the Dots&quot;</span><span class="p">)</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
    <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
    <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;navy&quot;</span><span class="p">,</span> <span class="s2">&quot;orange&quot;</span><span class="p">,</span> <span class="s2">&quot;olive&quot;</span><span class="p">,</span> <span class="s2">&quot;firebrick&quot;</span><span class="p">,</span> <span class="s2">&quot;gold&quot;</span><span class="p">]</span>
    <span class="p">))</span>

<span class="n">p</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://www.colors.commutercreative.com/@color/&quot;</span>
<span class="n">taptool</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">TapTool</span><span class="p">)</span>
<span class="n">taptool</span><span class="o">.</span><span class="n">callback</span> <span class="o">=</span> <span class="n">OpenURL</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>

<div class="bk-root">
    
    <script
        src="bokeh-plot-70c4a95408c548b5deb1651d835bc3d4.js"
        id="d6e8cf9f-4010-454b-b68f-698af7384bed"
        data-bokeh-model-id="54eaa84f-8d38-4478-8ea9-34663fb7dc7e"
        data-bokeh-doc-id="4462e3d6-3418-4d26-a9f2-d8aed398baea"
    ></script>
</div><p>Now you have learned how to open an URL when the user clicks on a glyph.</p>
</div>
<div class="section" id="customjs-for-widgets">
<span id="userguide-interaction-actions-widget-callbacks"></span><h3>CustomJS for Widgets<a class="headerlink" href="#customjs-for-widgets" title="Permalink to this headline">¶</a></h3>
<p>Bokeh lets you express even more advanced callbacks that must be called on
the Javascript side in order to add custom logic and interactivity when a
widget is used. For instance, we may want to change the data of a plot when
a user clicks on a button or changes a slider Widget.</p>
<p>Custom callbacks like these can be set using a CustomJS object and passing it
as the <code class="docutils literal"><span class="pre">callback</span></code> argument to a Widget object.</p>
<p>The code below shows an example of CustomJS set on a slider Widget that
changes the source of a plot when the slider is used.</p>
<div class="highlight-python" id="interaction.rst.bokeh-plot-19"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">column</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">CustomJS</span><span class="p">,</span> <span class="n">ColumnDataSource</span><span class="p">,</span> <span class="n">Slider</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">Figure</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;callback.html&quot;</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">*</span><span class="mf">0.005</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">)]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">))</span>

<span class="n">plot</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">plot_width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
<span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">line_width</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">line_alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>

<span class="n">callback</span> <span class="o">=</span> <span class="n">CustomJS</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">),</span> <span class="n">code</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        var data = source.get(&#39;data&#39;);</span>
<span class="s2">        var f = cb_obj.get(&#39;value&#39;)</span>
<span class="s2">        x = data[&#39;x&#39;]</span>
<span class="s2">        y = data[&#39;y&#39;]</span>
<span class="s2">        for (i = 0; i &lt; x.length; i++) {</span>
<span class="s2">            y[i] = Math.pow(x[i], f)</span>
<span class="s2">        }</span>
<span class="s2">        source.trigger(&#39;change&#39;);</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">step</span><span class="o">=.</span><span class="mi">1</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;power&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>

<span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">slider</span><span class="p">,</span> <span class="n">plot</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
</pre></div>
</div>

<div class="bk-root">
    
    <script
        src="bokeh-plot-1d940d5af974c5999227d79748af039e.js"
        id="2cdaf1f8-e74b-42cd-9552-1616e0f5f84f"
        data-bokeh-model-id="5c2b8a83-2c95-4b06-9f91-c9b17e05555d"
        data-bokeh-doc-id="ee994c7b-5567-46f4-b1db-2d43e32dbd30"
    ></script>
</div></div>
<div class="section" id="customjs-for-tools">
<span id="userguide-interaction-actions-tool-callbacks"></span><h3>CustomJS for Tools<a class="headerlink" href="#customjs-for-tools" title="Permalink to this headline">¶</a></h3>
<p>Bokeh allows for some tool events to trigger custom Javascript callbacks that
have access to the tool&#8217;s attributes. Below, a callback on the BoxSelectTool
uses the selection box dimensions (accessed in the geometry field of the
cb_data object that is injected into the Callback code attribute), in order to
add a Rect glyph to the plot with identical dimensions.</p>
<div class="highlight-python" id="interaction.rst.bokeh-plot-20"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">CustomJS</span><span class="p">,</span> <span class="n">ColumnDataSource</span><span class="p">,</span> <span class="n">BoxSelectTool</span><span class="p">,</span> <span class="n">Range1d</span><span class="p">,</span> <span class="n">Rect</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;boxselecttool_callback.html&quot;</span><span class="p">)</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[],</span> <span class="n">y</span><span class="o">=</span><span class="p">[],</span> <span class="n">width</span><span class="o">=</span><span class="p">[],</span> <span class="n">height</span><span class="o">=</span><span class="p">[]))</span>

<span class="n">callback</span> <span class="o">=</span> <span class="n">CustomJS</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">),</span> <span class="n">code</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        // get data source from Callback args</span>
<span class="s2">        var data = source.get(&#39;data&#39;);</span>

<span class="s2">        /// get BoxSelectTool dimensions from cb_data parameter of Callback</span>
<span class="s2">        var geometry = cb_data[&#39;geometry&#39;];</span>

<span class="s2">        /// calculate Rect attributes</span>
<span class="s2">        var width = geometry[&#39;x1&#39;] - geometry[&#39;x0&#39;];</span>
<span class="s2">        var height = geometry[&#39;y1&#39;] - geometry[&#39;y0&#39;];</span>
<span class="s2">        var x = geometry[&#39;x0&#39;] + width/2;</span>
<span class="s2">        var y = geometry[&#39;y0&#39;] + height/2;</span>

<span class="s2">        /// update data source with new Rect attributes</span>
<span class="s2">        data[&#39;x&#39;].push(x);</span>
<span class="s2">        data[&#39;y&#39;].push(y);</span>
<span class="s2">        data[&#39;width&#39;].push(width);</span>
<span class="s2">        data[&#39;height&#39;].push(height);</span>

<span class="s2">        // trigger update of data source</span>
<span class="s2">        source.trigger(&#39;change&#39;);</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">box_select</span> <span class="o">=</span> <span class="n">BoxSelectTool</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">plot_width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
           <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
           <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">box_select</span><span class="p">],</span>
           <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Select Below&quot;</span><span class="p">,</span>
           <span class="n">x_range</span><span class="o">=</span><span class="n">Range1d</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mf">1.0</span><span class="p">),</span>
           <span class="n">y_range</span><span class="o">=</span><span class="n">Range1d</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mf">1.0</span><span class="p">))</span>

<span class="n">rect</span> <span class="o">=</span> <span class="n">Rect</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="s1">&#39;width&#39;</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="s1">&#39;height&#39;</span><span class="p">,</span>
            <span class="n">fill_alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
            <span class="n">fill_color</span><span class="o">=</span><span class="s1">&#39;#009933&#39;</span><span class="p">)</span>

<span class="n">p</span><span class="o">.</span><span class="n">add_glyph</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">rect</span><span class="p">,</span> <span class="n">selection_glyph</span><span class="o">=</span><span class="n">rect</span><span class="p">,</span> <span class="n">nonselection_glyph</span><span class="o">=</span><span class="n">rect</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>

<div class="bk-root">
    
    <script
        src="bokeh-plot-b7f2414474abdf9fbbfd6e381f64b93f.js"
        id="7e89f60e-cb00-41fb-a2e3-676579500b7b"
        data-bokeh-model-id="ce7478e9-c1b0-4c84-9b38-3350507db854"
        data-bokeh-doc-id="0b1cf14f-d095-4cff-bc62-8e43b96c0b78"
    ></script>
</div></div>
<div class="section" id="customjs-for-selections">
<span id="userguide-interaction-actions-selection-callbacks"></span><h3>CustomJS for Selections<a class="headerlink" href="#customjs-for-selections" title="Permalink to this headline">¶</a></h3>
<p>Bokeh also provides the means to specify the same kind of callback to be
executed whenever a selection changes. As a simple demonstration, the example
below simply copies selected points on the first plot to the second. However,
more sophisticated actions and computations are easily constructed in a
similar way.</p>
<div class="highlight-python" id="interaction.rst.bokeh-plot-21"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span>

<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">row</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">CustomJS</span><span class="p">,</span> <span class="n">ColumnDataSource</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;callback.html&quot;</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">500</span><span class="p">)]</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="p">()</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">500</span><span class="p">)]</span>

<span class="n">s1</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">))</span>
<span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">plot_width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="s2">&quot;lasso_select&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Select Here&quot;</span><span class="p">)</span>
<span class="n">p1</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>

<span class="n">s2</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[],</span> <span class="n">y</span><span class="o">=</span><span class="p">[]))</span>
<span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">plot_width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">x_range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">y_range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="n">tools</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Watch Here&quot;</span><span class="p">)</span>
<span class="n">p2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">s2</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>

<span class="n">s1</span><span class="o">.</span><span class="n">callback</span> <span class="o">=</span> <span class="n">CustomJS</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">s2</span><span class="o">=</span><span class="n">s2</span><span class="p">),</span> <span class="n">code</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        var inds = cb_obj.get(&#39;selected&#39;)[&#39;1d&#39;].indices;</span>
<span class="s2">        var d1 = cb_obj.get(&#39;data&#39;);</span>
<span class="s2">        var d2 = s2.get(&#39;data&#39;);</span>
<span class="s2">        d2[&#39;x&#39;] = []</span>
<span class="s2">        d2[&#39;y&#39;] = []</span>
<span class="s2">        for (i = 0; i &lt; inds.length; i++) {</span>
<span class="s2">            d2[&#39;x&#39;].push(d1[&#39;x&#39;][inds[i]])</span>
<span class="s2">            d2[&#39;y&#39;].push(d1[&#39;y&#39;][inds[i]])</span>
<span class="s2">        }</span>
<span class="s2">        s2.trigger(&#39;change&#39;);</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
</pre></div>
</div>

<div class="bk-root">
    
    <script
        src="bokeh-plot-65e4238c7fdebe973e6e9fca95fb70d1.js"
        id="9ed23a58-1b84-440a-9f24-2b45a5f7fb8f"
        data-bokeh-model-id="39f71d82-533a-4255-9f78-d1dbd5bc12e7"
        data-bokeh-doc-id="1419f9ee-a6a6-4825-ab6a-83ff2513b18e"
    ></script>
</div><p>Another more sophisticated example is shown below. It computes the average <cite>y</cite>
value of any selected points (including multiple disjoint selections), and draws
a line through that value.</p>
<div class="highlight-python" id="interaction.rst.bokeh-plot-22"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">random</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">CustomJS</span><span class="p">,</span> <span class="n">ColumnDataSource</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;callback.html&quot;</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">500</span><span class="p">)]</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="p">()</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">500</span><span class="p">)]</span>
<span class="n">color</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;navy&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">))</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">plot_width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="s2">&quot;lasso_select&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Select Here&quot;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">s</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span>

<span class="n">s2</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">ym</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]))</span>
<span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;ym&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;orange&quot;</span><span class="p">,</span> <span class="n">line_width</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">s2</span><span class="p">)</span>

<span class="n">s</span><span class="o">.</span><span class="n">callback</span> <span class="o">=</span> <span class="n">CustomJS</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">s2</span><span class="o">=</span><span class="n">s2</span><span class="p">),</span> <span class="n">code</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        var inds = cb_obj.get(&#39;selected&#39;)[&#39;1d&#39;].indices;</span>
<span class="s2">        var d = cb_obj.get(&#39;data&#39;);</span>
<span class="s2">        var ym = 0</span>

<span class="s2">        if (inds.length == 0) { return; }</span>

<span class="s2">        for (i = 0; i &lt; d[&#39;color&#39;].length; i++) {</span>
<span class="s2">            d[&#39;color&#39;][i] = &quot;navy&quot;</span>
<span class="s2">        }</span>
<span class="s2">        for (i = 0; i &lt; inds.length; i++) {</span>
<span class="s2">            d[&#39;color&#39;][inds[i]] = &quot;firebrick&quot;</span>
<span class="s2">            ym += d[&#39;y&#39;][inds[i]]</span>
<span class="s2">        }</span>

<span class="s2">        ym /= inds.length</span>
<span class="s2">        s2.get(&#39;data&#39;)[&#39;ym&#39;] = [ym, ym]</span>

<span class="s2">        cb_obj.trigger(&#39;change&#39;);</span>
<span class="s2">        s2.trigger(&#39;change&#39;);</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>

<div class="bk-root">
    
    <script
        src="bokeh-plot-126fc232c3dd9574a16492d099ea91e0.js"
        id="70595d35-462b-40ce-a66b-735968211a89"
        data-bokeh-model-id="cb07f8f1-2952-47b7-9e52-8ac07dae3198"
        data-bokeh-doc-id="60e68a5e-855c-4831-813c-441b35593863"
    ></script>
</div></div>
<div class="section" id="customjs-for-hover">
<span id="userguide-interaction-actions-hover-callbacks"></span><h3>CustomJS for Hover<a class="headerlink" href="#customjs-for-hover" title="Permalink to this headline">¶</a></h3>
<p>The HoverTool has a callback which comes with two pieces of built-in data: the
<cite>index</cite>, and the <cite>geometry</cite>. The <cite>index</cite> is the indices of any points that the
hover tool is over.</p>
<div class="highlight-python" id="interaction.rst.bokeh-plot-23"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span><span class="p">,</span> <span class="n">HoverTool</span><span class="p">,</span> <span class="n">CustomJS</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;hover_callback.html&quot;</span><span class="p">)</span>

<span class="c1"># define some points and a little graph between them</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">links</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">0</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
    <span class="mi">1</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
    <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
    <span class="mi">3</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
    <span class="mi">4</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="mi">5</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">toolbar_location</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Hover over points&#39;</span><span class="p">)</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">({</span><span class="s1">&#39;x0&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;y0&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;x1&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;y1&#39;</span><span class="p">:</span> <span class="p">[]})</span>
<span class="n">sr</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">segment</span><span class="p">(</span><span class="n">x0</span><span class="o">=</span><span class="s1">&#39;x0&#39;</span><span class="p">,</span> <span class="n">y0</span><span class="o">=</span><span class="s1">&#39;y0&#39;</span><span class="p">,</span> <span class="n">x1</span><span class="o">=</span><span class="s1">&#39;x1&#39;</span><span class="p">,</span> <span class="n">y1</span><span class="o">=</span><span class="s1">&#39;y1&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;olive&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">line_width</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="p">)</span>
<span class="n">cr</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;olive&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">hover_color</span><span class="o">=</span><span class="s1">&#39;olive&#39;</span><span class="p">,</span> <span class="n">hover_alpha</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>

<span class="c1"># Add a hover tool, that sets the link data for a hovered circle</span>
<span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">var links = </span><span class="si">%s</span><span class="s2">;</span>
<span class="s2">var data = {&#39;x0&#39;: [], &#39;y0&#39;: [], &#39;x1&#39;: [], &#39;y1&#39;: []};</span>
<span class="s2">var cdata = circle.get(&#39;data&#39;);</span>
<span class="s2">var indices = cb_data.index[&#39;1d&#39;].indices;</span>
<span class="s2">for (i=0; i &lt; indices.length; i++) {</span>
<span class="s2">    ind0 = indices[i]</span>
<span class="s2">    for (j=0; j &lt; links[ind0].length; j++) {</span>
<span class="s2">        ind1 = links[ind0][j];</span>
<span class="s2">        data[&#39;x0&#39;].push(cdata.x[ind0]);</span>
<span class="s2">        data[&#39;y0&#39;].push(cdata.y[ind0]);</span>
<span class="s2">        data[&#39;x1&#39;].push(cdata.x[ind1]);</span>
<span class="s2">        data[&#39;y1&#39;].push(cdata.y[ind1]);</span>
<span class="s2">    }</span>
<span class="s2">}</span>
<span class="s2">segment.set(&#39;data&#39;, data);</span>
<span class="s2">&quot;&quot;&quot;</span> <span class="o">%</span> <span class="n">links</span>

<span class="n">callback</span> <span class="o">=</span> <span class="n">CustomJS</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;circle&#39;</span><span class="p">:</span> <span class="n">cr</span><span class="o">.</span><span class="n">data_source</span><span class="p">,</span> <span class="s1">&#39;segment&#39;</span><span class="p">:</span> <span class="n">sr</span><span class="o">.</span><span class="n">data_source</span><span class="p">},</span> <span class="n">code</span><span class="o">=</span><span class="n">code</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_tools</span><span class="p">(</span><span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">,</span> <span class="n">renderers</span><span class="o">=</span><span class="p">[</span><span class="n">cr</span><span class="p">]))</span>

<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>

<div class="bk-root">
    
    <script
        src="bokeh-plot-89e5358481ebed24b3a37d2f304d8c09.js"
        id="874ad8ae-51e0-42f7-82d7-4b71d451d4e0"
        data-bokeh-model-id="5fb06151-be41-4b5a-b768-4ef35069451e"
        data-bokeh-doc-id="495e6cb4-c97f-4313-8a35-d5b8eaaaa802"
    ></script>
</div></div>
<div class="section" id="customjs-for-range-update">
<span id="userguide-interaction-actions-range-update-callbacks"></span><h3>CustomJS for Range Update<a class="headerlink" href="#customjs-for-range-update" title="Permalink to this headline">¶</a></h3>
<p>With Bokeh, ranges have a callback attribute that accept a Callback instance
and execute javascript code on range updates that are triggered by tool
interactions such as a box zoom, wheel scroll or pan.</p>
<div class="highlight-python" id="interaction.rst.bokeh-plot-24"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">row</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span><span class="p">,</span> <span class="n">CustomJS</span><span class="p">,</span> <span class="n">Rect</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">figure</span><span class="p">,</span> <span class="n">show</span>

<span class="n">output_file</span><span class="p">(</span><span class="s1">&#39;range_update_callback.html&#39;</span><span class="p">)</span>

<span class="n">N</span> <span class="o">=</span> <span class="mi">4000</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">N</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">N</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
<span class="n">radii</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">N</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.5</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;#</span><span class="si">%02x%02x%02x</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">g</span><span class="p">),</span> <span class="mi">150</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="mi">50</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="mi">30</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">y</span><span class="p">)</span>
<span class="p">]</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;height&#39;</span><span class="p">:</span> <span class="p">[]})</span>

<span class="n">jscode</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    var data = source.get(&#39;data&#39;);</span>
<span class="s2">    var start = cb_obj.get(&#39;start&#39;);</span>
<span class="s2">    var end = cb_obj.get(&#39;end&#39;);</span>
<span class="s2">    data[&#39;</span><span class="si">%s</span><span class="s2">&#39;] = [start + (end - start) / 2];</span>
<span class="s2">    data[&#39;</span><span class="si">%s</span><span class="s2">&#39;] = [end - start];</span>
<span class="s2">    source.trigger(&#39;change&#39;);</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Pan and Zoom Here&#39;</span><span class="p">,</span> <span class="n">x_range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">y_range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
            <span class="n">tools</span><span class="o">=</span><span class="s1">&#39;box_zoom,wheel_zoom,pan,reset&#39;</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
<span class="n">p1</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">radii</span><span class="p">,</span> <span class="n">fill_color</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">fill_alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

<span class="n">p1</span><span class="o">.</span><span class="n">x_range</span><span class="o">.</span><span class="n">callback</span> <span class="o">=</span> <span class="n">CustomJS</span><span class="p">(</span>
        <span class="n">args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">),</span> <span class="n">code</span><span class="o">=</span><span class="n">jscode</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;width&#39;</span><span class="p">))</span>
<span class="n">p1</span><span class="o">.</span><span class="n">y_range</span><span class="o">.</span><span class="n">callback</span> <span class="o">=</span> <span class="n">CustomJS</span><span class="p">(</span>
        <span class="n">args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">),</span> <span class="n">code</span><span class="o">=</span><span class="n">jscode</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;height&#39;</span><span class="p">))</span>

<span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;See Zoom Window Here&#39;</span><span class="p">,</span> <span class="n">x_range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">y_range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
            <span class="n">tools</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
<span class="n">p2</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">radii</span><span class="p">,</span> <span class="n">fill_color</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">fill_alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="n">rect</span> <span class="o">=</span> <span class="n">Rect</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;width&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="n">fill_alpha</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
            <span class="n">line_color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">fill_color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="n">p2</span><span class="o">.</span><span class="n">add_glyph</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">rect</span><span class="p">)</span>

<span class="n">layout</span> <span class="o">=</span> <span class="n">row</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
</pre></div>
</div>

<div class="bk-root">
    
    <script
        src="bokeh-plot-1d1c828f2e7da113809e251e01a43b20.js"
        id="70c3bc98-d026-4708-8c5e-871b145e6b5d"
        data-bokeh-model-id="9d27b1ed-57ce-4d93-86f8-a9d1137d54b1"
        data-bokeh-doc-id="63f26621-5e7a-4185-85e4-747e7fec1963"
    ></script>
</div></div>
<div class="section" id="customjs-with-a-python-function">
<span id="userguide-interaction-actions-in-python"></span><h3>CustomJS with a Python function<a class="headerlink" href="#customjs-with-a-python-function" title="Permalink to this headline">¶</a></h3>
<p>A CustomJS callback can also be implemented as a Python function, which
is then translated to JavaScript using PyScript. This makes it easier
for users to define client-side interactions without having to learn
JavaScript. To use this functionality you need the Flexx library
(install with <code class="docutils literal"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">-c</span> <span class="pre">bokeh</span> <span class="pre">flexx</span></code> or <code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">flexx</span></code>).</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">It is critical to note that <strong>no python code is ever executed when
a CustomJS callback is used</strong>. This is true even when the callback is
supplied as python code to be translated to JavaScript as described in
this section. A <code class="docutils literal"><span class="pre">CustomJS</span></code> callback is only executed inside a browser
JavaScript interpreter, and can only directly interact JavaScript data
and functions (e.g., BokehJS Backbone models).</p>
</div>
<p>For more information about the subset of Python that is supported in
callbacks, see the <a class="reference external" href="http://flexx.readthedocs.org/en/stable/pyscript">pyscript documentation</a>.</p>
<p>We recommend using <code class="docutils literal"><span class="pre">window.x</span></code> for variables specific to JavaScript
to avoid confusion and help static code analysis tools. You can add
<code class="docutils literal"><span class="pre">window</span></code> as an argument to the callback function to help readability
(and pyflakes), as in the example below.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">column</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">CustomJS</span><span class="p">,</span> <span class="n">ColumnDataSource</span><span class="p">,</span> <span class="n">Slider</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">Figure</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;callback.html&quot;</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">*</span><span class="mf">0.005</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">)]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">))</span>

<span class="n">plot</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">plot_width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
<span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">line_width</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">line_alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
    <span class="n">f</span> <span class="o">=</span> <span class="n">cb_obj</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)):</span>
        <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">Math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">f</span><span class="p">)</span>
    <span class="n">source</span><span class="o">.</span><span class="n">trigger</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">)</span>

<span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">step</span><span class="o">=.</span><span class="mi">1</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;power&quot;</span><span class="p">,</span>
                <span class="n">callback</span><span class="o">=</span><span class="n">CustomJS</span><span class="o">.</span><span class="n">from_py_func</span><span class="p">(</span><span class="n">callback</span><span class="p">))</span>

<span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">slider</span><span class="p">,</span> <span class="n">plot</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
</pre></div>
</div>

<div class="bk-root">
    
    <script
        src="bokeh-plot-1d940d5af974c5999227d79748af039e.js"
        id="2cdaf1f8-e74b-42cd-9552-1616e0f5f84f"
        data-bokeh-model-id="5c2b8a83-2c95-4b06-9f91-c9b17e05555d"
        data-bokeh-doc-id="ee994c7b-5567-46f4-b1db-2d43e32dbd30"
    ></script>
</div></div>
</div>
</div>


    </div>
  </div>

<!-- END MAIN BODY OF DOCS ––––––––––––– -->

<footer class="footer">
  <div class="footer-links">
    <ul>
      <li><span class="footer-title">About Us</span></li>
      
          <li><a href="//bokeh.org/">About</a></li>
      
          <li><a href="//bokeh.org/team/">Team</a></li>
      
          <li><a href="//bokeh.org/team/">Contact</a></li>
      
    </ul>
    <ul>
      <li><span class="footer-title">Links</span></li>
      
          <li><a href="//bokeh.org/">FAQs</a></li>
      
          <li><a href="//bokeh.org/roadmap/">Technical vision</a></li>
      
          <li><a href="//bokeh.org/roadmap/">Roadmap</a></li>
      
          <li><a href="//bokeh.org/citation/">Citation</a></li>
      
    </ul>
    <ul>
      <li><span class="footer-title">Join Us</span></li>
      
          <li><a href="//bokeh.org/">Contribute</a></li>
      
          <li><a href="//groups.google.com/a/continuum.io/forum/#!forum/bokeh">Mailing list</a></li>
      
          <li><a href="//github.com/bokeh/bokeh">Github</a></li>
      
          <li><a href="//twitter.com/BokehPlots">Twitter</a></li>
      
          <li><a href="//www.youtube.com/channel/UCK0rSk29mmg4UT4bIOvPYhw">YouTube</a></li>
      
    </ul>
    <ul class="copyright">
      <li>© Copyright 2015, Anaconda.</li>
    </ul>
  </div>
</footer>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27761864-7', 'auto');
  ga('user.set', 'anonymizeIp', true);ga('send', 'pageview');
</script>

<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
</body>

</html>