<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>Providing Data for Plots and Tables &mdash; Bokeh 1.0.4 documentation</title>
  <meta name="description" content="Bokeh visualization library, documentation site.">
  <meta name="author" content="Bokeh contributors">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
  <script>
    WebFont.load({
      google: {
        families: ['Source Sans Pro']
      }
    });
  </script>

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="../../_static/css/main.css">

  <!-- Scripts
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script type="text/javascript">
    var _BOKEH_CURRENT_VERSION = "1.0.4";
  </script>
  <script src="../../_static/js/main.js"></script>

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="https://static.bokeh.org/favicon/favicon-32x32.png.ico">

  <!-- Canonical
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="canonical" href="https://docs.bokeh.org/en/latest/docs/user_guide/data.html" />

</head>
<body class="">

  <header class="navigation">
    <div class="wrapper">
      <a href="" class="logo">
        <img src="../../_static/images/logo.png" alt="Bokeh Logo">
      </a>
      <a href="" class="navigation-menu logo-text">Bokeh</a>
      <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">Menu</a>
      <nav>
        <ul id="js-navigation-menu" class="navigation-menu show">
        
          <li class="nav-link"><a href="//github.com/bokeh/bokeh">Github</a></li>
        
        </ul>
      </nav>
    </div>
  </header>
  <div class="second-nav">
    <nav>
      <ul class="navigation-menu show">
        <li class="nav-link more"><a href="../../index.html">1.0.4</a>
            <ul class="submenu">
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/1.0.4/">1.0.4</a></li>
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/1.0.3/">1.0.3</a></li>
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/1.0.2/">1.0.2</a></li>
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/1.0.1/">1.0.1</a></li>
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/1.0.0/">1.0.0</a></li>
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/0.13.0/">0.13.0</a></li>
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/0.12.16/">0.12.16</a></li>
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/0.12.15/">0.12.15</a></li>
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/0.12.14/">0.12.14</a></li>
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/0.11.0/">0.11.0</a></li>
              
            </ul>
        </li>
            
            <li class="nav-link doc-head"><a href="../installation.html">Installation</a></li>
            
            
            <li class="nav-link doc-head"><a href="../user_guide.html">User Guide</a></li>
            
            
            <li class="nav-link doc-head"><a href="../gallery.html">Gallery</a></li>
            
            
            <li class="nav-link doc-head"><a href="https://mybinder.org/v2/gh/bokeh/bokeh-notebooks/master?filepath=tutorial%2F00%20-%20Introduction%20and%20Setup.ipynb">Tutorial</a></li>
            
            
            <li class="nav-link doc-head"><a href="../reference.html">Reference</a></li>
            
            
            <li class="nav-link doc-head"><a href="../releases.html">Releases</a></li>
            
            
            <li class="nav-link doc-head"><a href="../dev_guide.html">Developer Guide</a></li>
            
      </ul>
    </nav>
  </div>

<!-- MAIN BODY OF DOCS –––––––––––––––––– -->
  <div class="docs section">
    <div class="toc">
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Defining Key Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting.html">Plotting with Basic Glyphs</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Providing Data for Plots and Tables</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#providing-data-directly">Providing data directly</a></li>
<li class="toctree-l2"><a class="reference internal" href="#columndatasource">ColumnDataSource</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pandas">Pandas</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pandas-multiindex">Pandas MultiIndex</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pandas-groupby">Pandas GroupBy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#streaming">Streaming</a></li>
<li class="toctree-l3"><a class="reference internal" href="#patching">Patching</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#transforming-data">Transforming Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#colors">Colors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#markers">Markers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customjstransform">CustomJSTransform</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#filtering-data">Filtering Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#indexfilter">IndexFilter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#booleanfilter">BooleanFilter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#groupfilter">GroupFilter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customjsfilter">CustomJSFilter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#javascript">Javascript</a></li>
<li class="toctree-l4"><a class="reference internal" href="#coffeescript">Coffeescript</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ajaxdatasource">AjaxDataSource</a></li>
<li class="toctree-l2"><a class="reference internal" href="#linked-selection">Linked selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#linked-selection-with-filtered-data">Linked selection with filtered data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other-data-types">Other Data Types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="layout.html">Laying out Plots and Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="categorical.html">Handling Categorical Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="graph.html">Visualizing Network Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="geo.html">Mapping Geo Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Configuring Plot Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="styling.html">Styling Visual Attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="annotations.html">Adding Annotations</a></li>
<li class="toctree-l1"><a class="reference internal" href="interaction.html">Adding Interactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="server.html">Running a Bokeh Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebook.html">Working in the Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="export.html">Exporting Plots</a></li>
<li class="toctree-l1"><a class="reference internal" href="embed.html">Embedding Plots and Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Using <code class="docutils literal notranslate"><span class="pre">bokeh</span></code> Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions.html">Extending Bokeh</a></li>
<li class="toctree-l1"><a class="reference internal" href="compat.html">Leveraging Other Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="webgl.html">Speeding up with WebGL</a></li>
<li class="toctree-l1"><a class="reference internal" href="bokehjs.html">Developing with JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="info.html">Learning More</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/0_bokeh.html">bokeh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/application.html">bokeh.application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/client.html">bokeh.client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/colors.html">bokeh.colors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/command.html">bokeh.command</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/core.html">bokeh.core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/document.html">bokeh.document</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/driving.html">bokeh.driving</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/embed.html">bokeh.embed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/events.html">bokeh.events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/io.html">bokeh.io</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/layouts.html">bokeh.layouts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/model.html">bokeh.model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/models.html">bokeh.models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/palettes.html">bokeh.palettes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/plotting.html">bokeh.plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/protocol.html">bokeh.protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/resources.html">bokeh.resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/sampledata.html">bokeh.sampledata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/server.html">bokeh.server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/settings.html">bokeh.settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/sphinxext.html">bokeh.sphinxext</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/themes.html">bokeh.themes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/tile_providers.html">bokeh.tile_providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/transform.html">bokeh.transform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/util.html">bokeh.util</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/setup.html">Getting Set Up</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/env_vars.html">Environment Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/models.html">Bokeh Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/server.html">Server Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/bindings.html">Language Bindings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/bokehjs.html">BokehJS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">1.0.4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#id2">1.0.3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#id3">1.0.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-1-0-1">1.0.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-1-0-0">1.0.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-13-0">0.13.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-12-16">0.12.16</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-12-15">0.12.15</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-12-14">0.12.14</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-12-13">0.12.13</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-12-11">0.12.11</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-12-10">0.12.10</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-12-9">0.12.9</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-12-7">0.12.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-12-6">0.12.6</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-12-5">0.12.5</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-12-4">0.12.4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-12-3">0.12.3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-12-2">0.12.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-12-1">0.12.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-12-0">0.12.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-11-1">0.11.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-11-0">0.11.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-10-0">0.10.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-9-3">0.9.3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-9-2">0.9.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-9-1">0.9.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-9-0">0.9.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-8-2">0.8.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-8-1">0.8.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-8-0">0.8.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-7-1">0.7.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-7-0">0.7.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-6-1">0.6.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-6-0">0.6.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-5-2">0.5.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-5-1">0.5.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-5-0">0.5.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-4-4">0.4.4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-4-2">0.4.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-4-1">0.4.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-4-0">0.4.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-3-0">0.3.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-2-0">0.2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html#release-0-1-0">0.1.0</a></li>
</ul>

    </div>
    <div class="content">
        
  <div class="section" id="providing-data-for-plots-and-tables">
<span id="userguide-data"></span><h1>Providing Data for Plots and Tables<a class="headerlink" href="#providing-data-for-plots-and-tables" title="Permalink to this headline">¶</a></h1>
<p>No data visualization is possible without the underlying data to be represented.
In this section, the various ways of providing data for plots is explained, from
passing data values directly to creating a <a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.ColumnDataSource" title="bokeh.models.sources.ColumnDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDataSource</span></code></a> and filtering using
a <a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.CDSView" title="bokeh.models.sources.CDSView"><code class="xref py py-class docutils literal notranslate"><span class="pre">CDSView</span></code></a>.</p>
<div class="section" id="providing-data-directly">
<h2>Providing data directly<a class="headerlink" href="#providing-data-directly" title="Permalink to this headline">¶</a></h2>
<p>In Bokeh, it is possible to pass lists of values directly into plotting functions.
In the example below, the data, <code class="docutils literal notranslate"><span class="pre">x_values</span></code> and <code class="docutils literal notranslate"><span class="pre">y_values</span></code>, are passed directly
to the <code class="docutils literal notranslate"><span class="pre">circle</span></code> plotting method (see <a class="reference internal" href="plotting.html#userguide-plotting"><span class="std std-ref">Plotting with Basic Glyphs</span></a> for more examples).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="n">x_values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">y_values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x_values</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y_values</span><span class="p">)</span>
</pre></div>
</div>
<p>When you pass in data like this, Bokeh works behind the scenes to make a
<a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.ColumnDataSource" title="bokeh.models.sources.ColumnDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDataSource</span></code></a> for you. But learning to create and use the <a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.ColumnDataSource" title="bokeh.models.sources.ColumnDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDataSource</span></code></a>
will enable you access more advanced capabilities, such as streaming data,
sharing data between plots, and filtering data.</p>
</div>
<div class="section" id="columndatasource">
<h2>ColumnDataSource<a class="headerlink" href="#columndatasource" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.ColumnDataSource" title="bokeh.models.sources.ColumnDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDataSource</span></code></a> is the core of most Bokeh plots, providing the data
that is visualized by the glyphs of the plot. With the <a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.ColumnDataSource" title="bokeh.models.sources.ColumnDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDataSource</span></code></a>,
it is easy to share data between multiple plots and widgets, such as the
<a class="reference internal" href="../reference/models/widgets.tables.html#bokeh.models.widgets.tables.DataTable" title="bokeh.models.widgets.tables.DataTable"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataTable</span></code></a>. When the same <a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.ColumnDataSource" title="bokeh.models.sources.ColumnDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDataSource</span></code></a> is used to drive multiple
renderers, selections of the data source are also shared. Thus it is possible
to use a select tool to choose data points from one plot and have them automatically
highlighted in a second plot (<a class="reference internal" href="#userguide-data-linked-selection"><span class="std std-ref">Linked selection</span></a>).</p>
<p>At the most basic level, a <a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.ColumnDataSource" title="bokeh.models.sources.ColumnDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDataSource</span></code></a> is simply a mapping between column
names and lists of data. The <a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.ColumnDataSource" title="bokeh.models.sources.ColumnDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDataSource</span></code></a> takes a <code class="docutils literal notranslate"><span class="pre">data</span></code> parameter which is a dict,
with string column names as keys and lists (or arrays) of data values as values. If one positional
argument is passed in to the <a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.ColumnDataSource" title="bokeh.models.sources.ColumnDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDataSource</span></code></a> initializer, it will be taken as <code class="docutils literal notranslate"><span class="pre">data</span></code>. Once the
<a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.ColumnDataSource" title="bokeh.models.sources.ColumnDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDataSource</span></code></a> has been created, it can be passed into the <code class="docutils literal notranslate"><span class="pre">source</span></code> parameter of
plotting methods which allows you to pass a column’s name as a stand in for the data values:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x_values&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
        <span class="s1">&#39;y_values&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">]}</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;x_values&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;y_values&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There is an implicit assumption that all the columns in a given <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code>
all have the same length at all times. For this reason, it is usually preferable to
update the <code class="docutils literal notranslate"><span class="pre">.data</span></code> property of a data source “all at once”.</p>
</div>
<div class="section" id="pandas">
<h3>Pandas<a class="headerlink" href="#pandas" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">data</span></code> parameter can also be a Pandas <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> or <code class="docutils literal notranslate"><span class="pre">GroupBy</span></code> object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<p>If a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> is used, the CDS will have columns corresponding to the columns of
the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>. The index of the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> will be reset, so if the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>
has a named index column, then CDS will also have a column with this name. However,
if the index name is <code class="docutils literal notranslate"><span class="pre">None</span></code>, then the CDS will be assigned a generic name.
It will be <code class="docutils literal notranslate"><span class="pre">index</span></code> if it is available, and <code class="docutils literal notranslate"><span class="pre">level_0</span></code> otherwise.</p>
</div>
<div class="section" id="pandas-multiindex">
<h3>Pandas MultiIndex<a class="headerlink" href="#pandas-multiindex" title="Permalink to this headline">¶</a></h3>
<p>All <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> columns and indices will be flattened before forming the
<code class="docutils literal notranslate"><span class="pre">ColumnsDataSource</span></code>. For the index, an index of tuples will be created, and the
names of the <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> joined with an underscore. The column names will also
be joined with an underscore. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">):</span> <span class="p">{(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">):</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">):</span> <span class="mi">2</span><span class="p">},</span>
                   <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">):</span> <span class="p">{(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">):</span> <span class="mi">7</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">):</span> <span class="mi">8</span><span class="p">},</span>
                   <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">):</span> <span class="p">{(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">):</span> <span class="mi">9</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">):</span> <span class="mi">10</span><span class="p">}})</span>
<span class="n">cds</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<p>will result in a column named <code class="docutils literal notranslate"><span class="pre">index</span></code> with <code class="docutils literal notranslate"><span class="pre">[(A,</span> <span class="pre">B),</span> <span class="pre">(A,</span> <span class="pre">C),</span> <span class="pre">(A,</span> <span class="pre">D)]</span></code> and columns
named <code class="docutils literal notranslate"><span class="pre">a_b</span></code>, <code class="docutils literal notranslate"><span class="pre">b_a</span></code>, and <code class="docutils literal notranslate"><span class="pre">b_b</span></code>. This process will fail for non-string column names,
so flatten the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> manually in that case.</p>
</div>
<div class="section" id="pandas-groupby">
<h3>Pandas GroupBy<a class="headerlink" href="#pandas-groupby" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">group</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">((</span><span class="s1">&#39;colA&#39;</span><span class="p">,</span> <span class="s1">&#39;ColB&#39;</span><span class="p">))</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
</pre></div>
</div>
<p>If a <code class="docutils literal notranslate"><span class="pre">GroupBy</span></code> object is used, the CDS will have columns corresponding to the result of
calling <code class="docutils literal notranslate"><span class="pre">group.describe()</span></code>. The <code class="docutils literal notranslate"><span class="pre">describe</span></code> method generates columns for statistical measures
such as <code class="docutils literal notranslate"><span class="pre">mean</span></code> and <code class="docutils literal notranslate"><span class="pre">count</span></code> for all the non-grouped original columns. The resulting <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>
has <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> columns with the original column name and the computed measure, so it
will be flattened using the aforementioned scheme. For example, if a
<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> has columns <code class="docutils literal notranslate"><span class="pre">'year'</span></code> and <code class="docutils literal notranslate"><span class="pre">'mpg'</span></code>. Then passing <code class="docutils literal notranslate"><span class="pre">df.groupby('year')</span></code>
to a CDS will result in columns such as <code class="docutils literal notranslate"><span class="pre">'mpg_mean'</span></code></p>
<p>Note this capability to adapt <code class="docutils literal notranslate"><span class="pre">GroupBy</span></code> objects may only work with Pandas <code class="docutils literal notranslate"><span class="pre">&gt;=0.20.0</span></code>.</p>
</div>
<div class="section" id="streaming">
<h3>Streaming<a class="headerlink" href="#streaming" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.ColumnDataSource" title="bokeh.models.sources.ColumnDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDataSource</span></code></a> streaming is an efficient way to append new data to a CDS. By using the
<code class="docutils literal notranslate"><span class="pre">stream</span></code> method, Bokeh only sends new data to the browser instead of the entire dataset.
The <code class="docutils literal notranslate"><span class="pre">stream</span></code> method takes a <code class="docutils literal notranslate"><span class="pre">new_data</span></code> parameter containing a dict mapping column names
to sequences of data to be appended to the respective columns. It additionally takes an optional
argument <code class="docutils literal notranslate"><span class="pre">rollover</span></code>, which is the maximum length of data to keep (data from the beginning of the
column will be discarded). The default <code class="docutils literal notranslate"><span class="pre">rollover</span></code> value of None allows data to grow unbounded.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">[],</span> <span class="n">bar</span><span class="o">=</span><span class="p">[]))</span>

<span class="c1"># has new, identical-length updates for all columns in source</span>
<span class="n">new_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;foo&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span>
    <span class="s1">&#39;bar&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">],</span>
<span class="p">}</span>

<span class="n">source</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">new_data</span><span class="p">)</span>
</pre></div>
</div>
<p>For an example that uses streaming, see <a class="reference external" href="https://github.com/bokeh/bokeh/tree/1.0.4/examples/app/ohlc">examples/app/ohlc</a>.</p>
</div>
<div class="section" id="patching">
<h3>Patching<a class="headerlink" href="#patching" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.ColumnDataSource" title="bokeh.models.sources.ColumnDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDataSource</span></code></a> patching is an efficient way to update slices of a data source. By using the
<code class="docutils literal notranslate"><span class="pre">patch</span></code> method, Bokeh only needs to send new data to the browser instead of the entire dataset.
The <code class="docutils literal notranslate"><span class="pre">patch</span></code> method should be passed a dict mapping column names to list of tuples that represent
a patch change to apply.</p>
<p>The tuples that describe patch changes are of the form:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">new_value</span><span class="p">)</span>  <span class="c1"># replace a single column value</span>

<span class="c1"># or</span>

<span class="p">(</span><span class="nb">slice</span><span class="p">,</span> <span class="n">new_values</span><span class="p">)</span> <span class="c1"># replace several column values</span>
</pre></div>
</div>
<p>For a full example, see <a class="reference external" href="https://github.com/bokeh/bokeh/tree/1.0.4/examples/howto/patch_app.py">examples/howto/patch_app.py</a>.</p>
</div>
</div>
<div class="section" id="transforming-data">
<h2>Transforming Data<a class="headerlink" href="#transforming-data" title="Permalink to this headline">¶</a></h2>
<p>We have seen above how data can be added to a <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code> to drive
Bokeh plots. This can include raw data or data that we explicitly transform
ourselves, for example a column of colors created to control how the Markers
in a scatter plot should be shaded. It is also possible to specify transforms
that only occur in the browser. This can be useful to reduce both code (i.e.
not having to color map data by hand) as well as the amount of data that has to
be sent into the browser (only the raw data is sent, and colormapping occurs
in the client).</p>
<p>In this section we examine some of the different transform objects that are
available.</p>
<div class="section" id="colors">
<h3>Colors<a class="headerlink" href="#colors" title="Permalink to this headline">¶</a></h3>
<p>To perform linear colormapping in the browser, the
<a class="reference internal" href="../reference/transform.html#bokeh.transform.linear_cmap" title="bokeh.transform.linear_cmap"><code class="xref py py-func docutils literal notranslate"><span class="pre">linear_cmap()</span></code></a> function may be used. It accepts the name
of a <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code> column to colormap, a palette (which can be a built-in
palette name, or an actual list of colors), and min/max values for the color
mapping range. The result can be passed to a color property on glyphs:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fill_color</span><span class="o">=</span><span class="n">linear_cmap</span><span class="p">(</span><span class="s1">&#39;counts&#39;</span><span class="p">,</span> <span class="s1">&#39;Viridis256&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>A complete example is shown here:</p>
<div class="highlight-python notranslate" id="docs/user_guide/data.bokeh-plot-bd73e67f8daa4d598a88ee067bc48d69.js"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.transform</span> <span class="kn">import</span> <span class="n">linear_cmap</span>
<span class="kn">from</span> <span class="nn">bokeh.util.hex</span> <span class="kn">import</span> <span class="n">hexbin</span>

<span class="n">n</span> <span class="o">=</span> <span class="mi">50000</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

<span class="n">bins</span> <span class="o">=</span> <span class="n">hexbin</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">tools</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">match_aspect</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">background_fill_color</span><span class="o">=</span><span class="s1">&#39;#440154&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="bp">False</span>

<span class="n">p</span><span class="o">.</span><span class="n">hex_tile</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="s2">&quot;q&quot;</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span>
           <span class="n">fill_color</span><span class="o">=</span><span class="n">linear_cmap</span><span class="p">(</span><span class="s1">&#39;counts&#39;</span><span class="p">,</span> <span class="s1">&#39;Viridis256&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">bins</span><span class="o">.</span><span class="n">counts</span><span class="p">)))</span>

<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>

<script src="/en/1.0.4/scripts/bokeh-plot-bd73e67f8daa4d598a88ee067bc48d69.js" id="9cebbd7b-5404-4d85-a0a5-3bc204b64b8d"></script><p>Besides <a class="reference internal" href="../reference/transform.html#bokeh.transform.linear_cmap" title="bokeh.transform.linear_cmap"><code class="xref py py-func docutils literal notranslate"><span class="pre">linear_cmap()</span></code></a> there is also
<a class="reference internal" href="../reference/transform.html#bokeh.transform.log_cmap" title="bokeh.transform.log_cmap"><code class="xref py py-func docutils literal notranslate"><span class="pre">log_cmap()</span></code></a> to perform color mapping on a log scale, as
well as <a class="reference internal" href="../reference/transform.html#bokeh.transform.factor_cmap" title="bokeh.transform.factor_cmap"><code class="xref py py-func docutils literal notranslate"><span class="pre">factor_cmap()</span></code></a> to colormap categorical data (see
the example below).</p>
</div>
<div class="section" id="markers">
<h3>Markers<a class="headerlink" href="#markers" title="Permalink to this headline">¶</a></h3>
<p>It is also possible to map categorical data to marker types. The example
below shows the use of <a class="reference internal" href="../reference/transform.html#bokeh.transform.factor_mark" title="bokeh.transform.factor_mark"><code class="xref py py-func docutils literal notranslate"><span class="pre">factor_mark()</span></code></a> to display different
markers or different categories in the input data. It also demonstrates the use
of <a class="reference internal" href="../reference/transform.html#bokeh.transform.factor_cmap" title="bokeh.transform.factor_cmap"><code class="xref py py-func docutils literal notranslate"><span class="pre">factor_cmap()</span></code></a> to colormap those same categories:</p>
<div class="highlight-python notranslate" id="docs/user_guide/data.bokeh-plot-30f055cf1eda43e3a2f4dbda2454d0e7.js"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.sampledata.iris</span> <span class="kn">import</span> <span class="n">flowers</span>
<span class="kn">from</span> <span class="nn">bokeh.transform</span> <span class="kn">import</span> <span class="n">factor_cmap</span><span class="p">,</span> <span class="n">factor_mark</span>

<span class="n">SPECIES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;setosa&#39;</span><span class="p">,</span> <span class="s1">&#39;versicolor&#39;</span><span class="p">,</span> <span class="s1">&#39;virginica&#39;</span><span class="p">]</span>
<span class="n">MARKERS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;hex&#39;</span><span class="p">,</span> <span class="s1">&#39;circle_x&#39;</span><span class="p">,</span> <span class="s1">&#39;triangle&#39;</span><span class="p">]</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Iris Morphology&quot;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s1">&#39;Petal Length&#39;</span>
<span class="n">p</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s1">&#39;Sepal Width&#39;</span>

<span class="n">p</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="s2">&quot;petal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_width&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">flowers</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="s2">&quot;species&quot;</span><span class="p">,</span> <span class="n">fill_alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
          <span class="n">marker</span><span class="o">=</span><span class="n">factor_mark</span><span class="p">(</span><span class="s1">&#39;species&#39;</span><span class="p">,</span> <span class="n">MARKERS</span><span class="p">,</span> <span class="n">SPECIES</span><span class="p">),</span>
          <span class="n">color</span><span class="o">=</span><span class="n">factor_cmap</span><span class="p">(</span><span class="s1">&#39;species&#39;</span><span class="p">,</span> <span class="s1">&#39;Category10_3&#39;</span><span class="p">,</span> <span class="n">SPECIES</span><span class="p">))</span>

<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>

<script src="/en/1.0.4/scripts/bokeh-plot-30f055cf1eda43e3a2f4dbda2454d0e7.js" id="7cbc9c24-c607-481d-992a-85acc2492580"></script><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference internal" href="../reference/transform.html#bokeh.transform.factor_mark" title="bokeh.transform.factor_mark"><code class="xref py py-func docutils literal notranslate"><span class="pre">factor_mark()</span></code></a> transform is primarily only useful
with the <code class="docutils literal notranslate"><span class="pre">scatter</span></code> glyph method, since only the <code class="docutils literal notranslate"><span class="pre">Scatter</span></code> glyph can be
parameterized by marker type.</p>
</div>
</div>
<div class="section" id="customjstransform">
<h3>CustomJSTransform<a class="headerlink" href="#customjstransform" title="Permalink to this headline">¶</a></h3>
<p>In addition to built-in transforms above, there is also a <code class="docutils literal notranslate"><span class="pre">CustomJSTransform</span></code>
that allows for specifying arbitrary JavaScript code to perform a transform step
on ColumnDataSource data. Typically, the <code class="docutils literal notranslate"><span class="pre">v_func</span></code> (for “vectorized” function)
is provided. (Less commonly a scalar equivalent <code class="docutils literal notranslate"><span class="pre">func</span></code> may also be needed).
The <code class="docutils literal notranslate"><span class="pre">v_func</span></code> code should expect an array of inputs in the variable <code class="docutils literal notranslate"><span class="pre">xs</span></code>, and
return a JavaScript array with the transformed values:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v_func</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    const first = xs[0]</span>
<span class="s2">    const norm = new Float64Array(xs.length)</span>
<span class="s2">    for (let i = 0; i &lt; xs.length; i++) {</span>
<span class="s2">        norm[i] = xs[i] / first</span>
<span class="s2">    }</span>
<span class="s2">    return norm</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="n">normalize</span> <span class="o">=</span> <span class="n">CustomJSTransform</span><span class="p">(</span><span class="n">v_func</span><span class="o">=</span><span class="n">v_func</span><span class="p">)</span>

<span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;aapl_date&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">transform</span><span class="p">(</span><span class="s1">&#39;aapl_close&#39;</span><span class="p">,</span> <span class="n">normalize</span><span class="p">),</span> <span class="n">line_width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
          <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#cf3c4d&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span><span class="n">legend</span><span class="o">=</span><span class="s2">&quot;Apple&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">aapl_source</span><span class="p">)</span>
</pre></div>
</div>
<p>The above code converts raw price data into a sequence of normalized returns
relative to the first data point. The full result is shown below:</p>

<script src="/en/1.0.4/scripts/bokeh-plot-e37eae257149480b85b22295f9c76c79.js" id="2b56aa24-c9a0-4787-bf34-8ac0e1ec550d"></script></div>
</div>
<div class="section" id="filtering-data">
<h2>Filtering Data<a class="headerlink" href="#filtering-data" title="Permalink to this headline">¶</a></h2>
<p>It’s often desirable to focus in on a portion of data that has been subsampled or filtered
from a larger dataset. Bokeh allows you to specify a view of a data source that represents
a subset of data. By having a view of the data source, the underlying data doesn’t need to
be changed and can be shared across plots. The view consists of one or more filters that
select the rows of the data source that should be bound to a specific glyph.</p>
<p>To plot with a subset of data, you can create a <a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.CDSView" title="bokeh.models.sources.CDSView"><code class="xref py py-class docutils literal notranslate"><span class="pre">CDSView</span></code></a> and pass it in as a <code class="docutils literal notranslate"><span class="pre">view</span></code>
argument to the renderer-adding methods on the <a class="reference internal" href="../reference/plotting.html#bokeh.plotting.figure.Figure" title="bokeh.plotting.figure.Figure"><code class="xref py py-class docutils literal notranslate"><span class="pre">Figure</span></code></a>, such as <code class="docutils literal notranslate"><span class="pre">figure.circle</span></code>. The
<a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.CDSView" title="bokeh.models.sources.CDSView"><code class="xref py py-class docutils literal notranslate"><span class="pre">CDSView</span></code></a> has two properties, <code class="docutils literal notranslate"><span class="pre">source</span></code> and <code class="docutils literal notranslate"><span class="pre">filters</span></code>. <code class="docutils literal notranslate"><span class="pre">source</span></code> is the <a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.ColumnDataSource" title="bokeh.models.sources.ColumnDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDataSource</span></code></a>
that the view is associated with. <code class="docutils literal notranslate"><span class="pre">filters</span></code> is a list of <a class="reference internal" href="../reference/models/filters.html#bokeh.models.filters.Filter" title="bokeh.models.filters.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Filter</span></code></a> objects, listed and
described below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span><span class="p">,</span> <span class="n">CDSView</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">some_data</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">CDSView</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="p">[</span><span class="n">filter1</span><span class="p">,</span> <span class="n">filter2</span><span class="p">])</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="indexfilter">
<h3>IndexFilter<a class="headerlink" href="#indexfilter" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../reference/models/filters.html#bokeh.models.filters.IndexFilter" title="bokeh.models.filters.IndexFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">IndexFilter</span></code></a> is the simplest filter type. It has an <code class="docutils literal notranslate"><span class="pre">indices</span></code> property which is a
list of integers that are the indices of the data you want to be included in the plot.</p>
<div class="highlight-python notranslate" id="docs/user_guide/data.bokeh-plot-8250bc23cc66478fb70f38f6df286b40.js"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">gridplot</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span><span class="p">,</span> <span class="n">CDSView</span><span class="p">,</span> <span class="n">IndexFilter</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span><span class="p">,</span> <span class="n">show</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]))</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">CDSView</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="p">[</span><span class="n">IndexFilter</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">])])</span>

<span class="n">tools</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;box_select&quot;</span><span class="p">,</span> <span class="s2">&quot;hover&quot;</span><span class="p">,</span> <span class="s2">&quot;reset&quot;</span><span class="p">]</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">plot_height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="n">tools</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">hover_color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="n">p_filtered</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">plot_height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="n">tools</span><span class="p">)</span>
<span class="n">p_filtered</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">hover_color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">gridplot</span><span class="p">([[</span><span class="n">p</span><span class="p">,</span> <span class="n">p_filtered</span><span class="p">]]))</span>
</pre></div>
</div>

<script src="/en/1.0.4/scripts/bokeh-plot-8250bc23cc66478fb70f38f6df286b40.js" id="0a5ce228-8672-41f8-83ba-a4ca9f71bbf7"></script></div>
<div class="section" id="booleanfilter">
<h3>BooleanFilter<a class="headerlink" href="#booleanfilter" title="Permalink to this headline">¶</a></h3>
<p>A <a class="reference internal" href="../reference/models/filters.html#bokeh.models.filters.BooleanFilter" title="bokeh.models.filters.BooleanFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">BooleanFilter</span></code></a> selects rows from a data source through a list of True or False values
in its <code class="docutils literal notranslate"><span class="pre">booleans</span></code> property.</p>
<div class="highlight-python notranslate" id="docs/user_guide/data.bokeh-plot-0ab608e95d8b4d48a66da27f2083a5a0.js"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">gridplot</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span><span class="p">,</span> <span class="n">CDSView</span><span class="p">,</span> <span class="n">BooleanFilter</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span><span class="p">,</span> <span class="n">show</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]))</span>
<span class="n">booleans</span> <span class="o">=</span> <span class="p">[</span><span class="bp">True</span> <span class="k">if</span> <span class="n">y_val</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="k">else</span> <span class="bp">False</span> <span class="k">for</span> <span class="n">y_val</span> <span class="ow">in</span> <span class="n">source</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]]</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">CDSView</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="p">[</span><span class="n">BooleanFilter</span><span class="p">(</span><span class="n">booleans</span><span class="p">)])</span>

<span class="n">tools</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;box_select&quot;</span><span class="p">,</span> <span class="s2">&quot;hover&quot;</span><span class="p">,</span> <span class="s2">&quot;reset&quot;</span><span class="p">]</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">plot_height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="n">tools</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">hover_color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="n">p_filtered</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">plot_height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="n">tools</span><span class="p">,</span>
                    <span class="n">x_range</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">x_range</span><span class="p">,</span> <span class="n">y_range</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">y_range</span><span class="p">)</span>
<span class="n">p_filtered</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">hover_color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">gridplot</span><span class="p">([[</span><span class="n">p</span><span class="p">,</span> <span class="n">p_filtered</span><span class="p">]]))</span>
</pre></div>
</div>

<script src="/en/1.0.4/scripts/bokeh-plot-0ab608e95d8b4d48a66da27f2083a5a0.js" id="624d6f60-8498-4e20-b329-993a70365a51"></script></div>
<div class="section" id="groupfilter">
<h3>GroupFilter<a class="headerlink" href="#groupfilter" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../reference/models/filters.html#bokeh.models.filters.GroupFilter" title="bokeh.models.filters.GroupFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">GroupFilter</span></code></a> allows you to select rows from a dataset that have a specific value for
a categorical variable. The <a class="reference internal" href="../reference/models/filters.html#bokeh.models.filters.GroupFilter" title="bokeh.models.filters.GroupFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">GroupFilter</span></code></a> has two properties, <code class="docutils literal notranslate"><span class="pre">column_name</span></code>, the name of
column in the <a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.ColumnDataSource" title="bokeh.models.sources.ColumnDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDataSource</span></code></a>, and <code class="docutils literal notranslate"><span class="pre">group</span></code>, the value of the column to select for.</p>
<p>In the example below, <code class="docutils literal notranslate"><span class="pre">flowers</span></code> contains a categorical variable <code class="docutils literal notranslate"><span class="pre">species</span></code> which is
either <code class="docutils literal notranslate"><span class="pre">setosa</span></code>, <code class="docutils literal notranslate"><span class="pre">versicolor</span></code>, or <code class="docutils literal notranslate"><span class="pre">virginica</span></code>.</p>
<div class="highlight-python notranslate" id="docs/user_guide/data.bokeh-plot-e50c349f445e40e9820dddd44267077f.js"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">gridplot</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span><span class="p">,</span> <span class="n">CDSView</span><span class="p">,</span> <span class="n">GroupFilter</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.sampledata.iris</span> <span class="kn">import</span> <span class="n">flowers</span>

<span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">flowers</span><span class="p">)</span>
<span class="n">view1</span> <span class="o">=</span> <span class="n">CDSView</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="p">[</span><span class="n">GroupFilter</span><span class="p">(</span><span class="n">column_name</span><span class="o">=</span><span class="s1">&#39;species&#39;</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="s1">&#39;versicolor&#39;</span><span class="p">)])</span>

<span class="n">plot_size_and_tools</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;plot_height&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span> <span class="s1">&#39;plot_width&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
                        <span class="s1">&#39;tools&#39;</span><span class="p">:[</span><span class="s1">&#39;box_select&#39;</span><span class="p">,</span> <span class="s1">&#39;reset&#39;</span><span class="p">,</span> <span class="s1">&#39;help&#39;</span><span class="p">]}</span>

<span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Full data set&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_size_and_tools</span><span class="p">)</span>
<span class="n">p1</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;petal_length&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;petal_width&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>

<span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Setosa only&quot;</span><span class="p">,</span> <span class="n">x_range</span><span class="o">=</span><span class="n">p1</span><span class="o">.</span><span class="n">x_range</span><span class="p">,</span> <span class="n">y_range</span><span class="o">=</span><span class="n">p1</span><span class="o">.</span><span class="n">y_range</span><span class="p">,</span> <span class="o">**</span><span class="n">plot_size_and_tools</span><span class="p">)</span>
<span class="n">p2</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;petal_length&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;petal_width&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">view1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">gridplot</span><span class="p">([[</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">]]))</span>
</pre></div>
</div>

<script src="/en/1.0.4/scripts/bokeh-plot-e50c349f445e40e9820dddd44267077f.js" id="0a47f2c8-cf6f-42b7-aa56-c8f9ac1bf07d"></script></div>
<div class="section" id="customjsfilter">
<h3>CustomJSFilter<a class="headerlink" href="#customjsfilter" title="Permalink to this headline">¶</a></h3>
<p>You can also create a <a class="reference internal" href="../reference/models/filters.html#bokeh.models.filters.CustomJSFilter" title="bokeh.models.filters.CustomJSFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">CustomJSFilter</span></code></a> with your own functionality. To do this, use JavaScript,
TypeScript or CoffeeScript to write code that returns either a list of indices or a list of
booleans that represents the filtered subset. The <a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.ColumnDataSource" title="bokeh.models.sources.ColumnDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDataSource</span></code></a> that is associated
with the <a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.CDSView" title="bokeh.models.sources.CDSView"><code class="xref py py-class docutils literal notranslate"><span class="pre">CDSView</span></code></a> this filter is added to will be available at render time with the
variable <code class="docutils literal notranslate"><span class="pre">source</span></code>.</p>
<div class="section" id="javascript">
<h4>Javascript<a class="headerlink" href="#javascript" title="Permalink to this headline">¶</a></h4>
<p>To create a <a class="reference internal" href="../reference/models/filters.html#bokeh.models.filters.CustomJSFilter" title="bokeh.models.filters.CustomJSFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">CustomJSFilter</span></code></a> with custom functionality written in JavaScript,
pass in the JavaScript code as a string to the parameter <code class="docutils literal notranslate"><span class="pre">code</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">custom_filter</span> <span class="o">=</span> <span class="n">CustomJSFilter</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">var indices = [];</span>

<span class="s1">// iterate through rows of data source and see if each satisfies some constraint</span>
<span class="s1">for (var i = 0; i &lt; source.get_length(); i++){</span>
<span class="s1">    if (source.data[&#39;some_column&#39;][i] == &#39;some_value&#39;){</span>
<span class="s1">        indices.push(true);</span>
<span class="s1">    } else {</span>
<span class="s1">        indices.push(false);</span>
<span class="s1">    }</span>
<span class="s1">}</span>
<span class="s1">return indices;</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="coffeescript">
<h4>Coffeescript<a class="headerlink" href="#coffeescript" title="Permalink to this headline">¶</a></h4>
<p>You can also write code for the <code class="docutils literal notranslate"><span class="pre">CustomJSFilter</span></code> in <a class="reference external" href="http://coffeescript.org">CoffeeScript</a>, and
use the <code class="docutils literal notranslate"><span class="pre">from_coffeescript</span></code> class method, which accepts the <code class="docutils literal notranslate"><span class="pre">code</span></code> parameter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">custom_filter_coffee</span> <span class="o">=</span> <span class="n">CustomJSFilter</span><span class="o">.</span><span class="n">from_coffeescript</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">z = source.data[&#39;z&#39;]</span>
<span class="s1">indices = (i for i in [0...source.get_length()] when z[i] == &#39;b&#39;)</span>
<span class="s1">return indices</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="ajaxdatasource">
<span id="userguide-data-ajax-data-source"></span><h2>AjaxDataSource<a class="headerlink" href="#ajaxdatasource" title="Permalink to this headline">¶</a></h2>
<p>Bokeh server applications make it simple to update and stream data to data
sources, but sometimes it is desirable to have similar functionality in
standalone documents. The <a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.AjaxDataSource" title="bokeh.models.sources.AjaxDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">AjaxDataSource</span></code></a>
provides this capability.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">AjaxDataSource</span></code> is configured with a URL to a REST endpoint and a
polling interval. In the browser, the data source will request data from the
endpoint at the specified interval and update the data locally. Existing
data may either be replaced entirely, or appended to (up to a configurable
<code class="docutils literal notranslate"><span class="pre">max_size</span></code>). The endpoint that is supplied should return a JSON dict that
matches the standard <code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code> format:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;x&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="s1">&#39;y&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Otherwise, using an <code class="docutils literal notranslate"><span class="pre">AjaxDataSource</span></code> is identical to using a standard
<code class="docutils literal notranslate"><span class="pre">ColumnDataSource</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">=</span> <span class="n">AjaxDataSource</span><span class="p">(</span><span class="n">data_url</span><span class="o">=</span><span class="s1">&#39;http://some.api.com/data&#39;</span><span class="p">,</span>
                        <span class="n">polling_interval</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="c1"># Use just like a ColumnDataSource</span>
<span class="n">p</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>
</pre></div>
</div>
<p>A full example (shown below) can be seen at
<a class="reference external" href="https://github.com/bokeh/bokeh/tree/1.0.4/examples/howto/ajax_source.py">examples/howto/ajax_source.py</a></p>
<img alt="../../_images/ajax_streaming.gif" src="../../_images/ajax_streaming.gif" />
</div>
<div class="section" id="linked-selection">
<span id="userguide-data-linked-selection"></span><h2>Linked selection<a class="headerlink" href="#linked-selection" title="Permalink to this headline">¶</a></h2>
<p>Using the same <a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.ColumnDataSource" title="bokeh.models.sources.ColumnDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDataSource</span></code></a> in the two plots below allows their selections to be
shared.</p>
<div class="highlight-python notranslate" id="docs/user_guide/data.bokeh-plot-ee8fa0fa4d2f4d16a3b868c52794e7b4.js"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">gridplot</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;brushing.html&quot;</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">))</span>
<span class="n">y0</span> <span class="o">=</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">xx</span><span class="p">)</span> <span class="k">for</span> <span class="n">xx</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
<span class="n">y1</span> <span class="o">=</span> <span class="p">[</span><span class="n">xx</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">xx</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>

<span class="c1"># create a column data source for the plots to share</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y0</span><span class="o">=</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="o">=</span><span class="n">y1</span><span class="p">))</span>

<span class="n">TOOLS</span> <span class="o">=</span> <span class="s2">&quot;box_select,lasso_select,help&quot;</span>

<span class="c1"># create a new plot and add a renderer</span>
<span class="n">left</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">tools</span><span class="o">=</span><span class="n">TOOLS</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="n">left</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y0&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># create another new plot and add a renderer</span>
<span class="n">right</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">tools</span><span class="o">=</span><span class="n">TOOLS</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="n">right</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y1&#39;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">gridplot</span><span class="p">([[</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">]])</span>

<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>

<script src="/en/1.0.4/scripts/bokeh-plot-ee8fa0fa4d2f4d16a3b868c52794e7b4.js" id="ff0df513-61c1-4d38-9484-3c4abefcf090"></script></div>
<div class="section" id="linked-selection-with-filtered-data">
<span id="userguide-data-linked-selection-with-filtering"></span><h2>Linked selection with filtered data<a class="headerlink" href="#linked-selection-with-filtered-data" title="Permalink to this headline">¶</a></h2>
<p>With the ability to specify a subset of data to be used for each glyph renderer, it is
easy to share data between plots even when the plots use different subsets of data.
By using the same <a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.ColumnDataSource" title="bokeh.models.sources.ColumnDataSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">ColumnDataSource</span></code></a>, selections and hovered inspections of that data source
are automatically shared.</p>
<p>In the example below, a <a class="reference internal" href="../reference/models/sources.html#bokeh.models.sources.CDSView" title="bokeh.models.sources.CDSView"><code class="xref py py-class docutils literal notranslate"><span class="pre">CDSView</span></code></a> is created for the second plot that specifies the subset
of data in which the y values are either greater than 250 or less than 100. Selections in either
plot are automatically reflected in the other. And hovering on a point in one plot will highlight
the corresponding point in the other plot if it exists.</p>
<div class="highlight-python notranslate" id="docs/user_guide/data.bokeh-plot-87a46b09f7fd4ad89e67c9a62499610a.js"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">gridplot</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span><span class="p">,</span> <span class="n">CDSView</span><span class="p">,</span> <span class="n">BooleanFilter</span>

<span class="n">output_file</span><span class="p">(</span><span class="s2">&quot;linked_selection_subsets.html&quot;</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">))</span>
<span class="n">y0</span> <span class="o">=</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">xx</span><span class="p">)</span> <span class="k">for</span> <span class="n">xx</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
<span class="n">y1</span> <span class="o">=</span> <span class="p">[</span><span class="n">xx</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">xx</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>

<span class="c1"># create a column data source for the plots to share</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y0</span><span class="o">=</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="o">=</span><span class="n">y1</span><span class="p">))</span>

<span class="c1"># create a view of the source for one plot to use</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">CDSView</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="p">[</span><span class="n">BooleanFilter</span><span class="p">([</span><span class="bp">True</span> <span class="k">if</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mi">250</span> <span class="ow">or</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">100</span> <span class="k">else</span> <span class="bp">False</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">y1</span><span class="p">])])</span>

<span class="n">TOOLS</span> <span class="o">=</span> <span class="s2">&quot;box_select,lasso_select,hover,help&quot;</span>

<span class="c1"># create a new plot and add a renderer</span>
<span class="n">left</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">tools</span><span class="o">=</span><span class="n">TOOLS</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="n">left</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y0&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">hover_color</span><span class="o">=</span><span class="s2">&quot;firebrick&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">)</span>

<span class="c1"># create another new plot, add a renderer that uses the view of the data source</span>
<span class="n">right</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">tools</span><span class="o">=</span><span class="n">TOOLS</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="n">right</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y1&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">hover_color</span><span class="o">=</span><span class="s2">&quot;firebrick&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="p">)</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">gridplot</span><span class="p">([[</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">]])</span>

<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>

<script src="/en/1.0.4/scripts/bokeh-plot-87a46b09f7fd4ad89e67c9a62499610a.js" id="f1e9a07e-7e27-4c65-a45a-0fb4208cf26c"></script></div>
<div class="section" id="other-data-types">
<h2>Other Data Types<a class="headerlink" href="#other-data-types" title="Permalink to this headline">¶</a></h2>
<p>Bokeh also has the capability to render network graph data and geographical data.
For more information about how to set up the data for these types of plots, see
<a class="reference internal" href="graph.html#userguide-graph"><span class="std std-ref">Visualizing Network Graphs</span></a> and <a class="reference internal" href="geo.html#userguide-geo"><span class="std std-ref">Mapping Geo Data</span></a>.</p>
</div>
</div>


    </div>
  </div>

<!-- END MAIN BODY OF DOCS ––––––––––––– -->

<footer class="footer">
  <div class="footer-links">
    <ul>
      <li><span class="footer-title">About Us</span></li>
      
        <li><a href="../vision.html">Vision and Work</a></li>
      
        <li><a href="../team.html">Team</a></li>
      
        <li><a href="../citation.html">Citation</a></li>
      
        <li><a href="../contact.html">Contact</a></li>
      
    </ul>
    <ul>
      <li><span class="footer-title">Join Us</span></li>
      
          
            <li><a href="../contribute.html">Contribute</a></li>
            
      
          
            <li><a href="//groups.google.com/a/anaconda.com/forum/#!forum/bokeh">Mailing list</a></li>
            
      
          
            <li><a href="//github.com/bokeh/bokeh">Github</a></li>
            
      
          
            <li><a href="//twitter.com/BokehPlots">Twitter</a></li>
            
      
    </ul>
    <ul class="copyright">
      <li>© Copyright 2015-2018, Anaconda and Bokeh Contributors.</li>
    </ul>
  </div>
</footer>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27761864-7', 'auto');
  ga('user.set', 'anonymizeIp', true);
  ga('send', 'pageview');
</script>

<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
</body>

</html>