<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>Extending Bokeh &mdash; Bokeh 0.12.1 documentation</title>
  <meta name="description" content="Bokeh visualization library, documentation site.">
  <meta name="author" content="Bokeh contributors">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600%7CNoto+Sans:400,700' rel='stylesheet' type='text/css'>

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="https://static.bokeh.org/bokehplots_archive/main.css">


  <!-- Scripts
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script type="text/javascript">
    var _BOKEH_CURRENT_VERSION = "0.12.1";
  </script>
  <script src="../../_static/js/main.js"></script>

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="https://static.bokeh.org/favicon/favicon-32x32.png.ico">

  <!-- Canonical
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="canonical" href="http://bokeh.pydata.org/en/latest/docs/user_guide/extensions.html" />

</head>
<body class="">

  <header class="navigation">
    <div class="wrapper">
      <a href="" class="logo">
        <img src="../../_static/images/logo.png" alt="Bokeh Logo">
      </a>
      <a href="" class="navigation-menu logo-text">Bokeh</a>
      <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">Menu</a>
      <nav>
        <ul id="js-navigation-menu" class="navigation-menu show">
          
              <li class="nav-link"><a href="//bokeh.org/">About</a></li>
          
              <li class="nav-link"><a href="/docs/gallery.html">Gallery</a></li>
          
              <li class="nav-link"><a href="//bokeh.pydata.org/en/latest/">Docs</a></li>
          
              <li class="nav-link"><a href="//github.com/bokeh/bokeh">Github</a></li>
          
        </ul>
      </nav>
    </div>
  </header>
  <div class="second-nav">
    <nav>
      <ul class="navigation-menu show">
        <li class="nav-link more"><a href="../../index.html">0.12.1</a>
            <ul class="submenu">
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/0.12.1/">0.12.1</a></li>
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/0.12.0/">0.12.0</a></li>
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/0.11.0/">0.11.0</a></li>
              
              <li class="version-link"><a href="//bokeh.pydata.org/en/0.10.0/">0.10.0</a></li>
              
            </ul>
        </li>
            <li class="nav-link doc-head"><a href="../installation.html">Installation</a></li>
            <li class="nav-link doc-head"><a href="../user_guide.html">User Guide</a></li>
            <li class="nav-link doc-head"><a href="../gallery.html">Gallery</a></li>
            <li class="nav-link doc-head"><a href="../reference.html">Reference</a></li>
            <li class="nav-link doc-head"><a href="../releases/0.12.1.html">Releases</a></li>
            <li class="nav-link doc-head"><a href="../dev_guide.html">Developer Guide</a></li>
      </ul>
    </nav>
    <div class="navigation-tools">
      <div class="search-bar">
  <form role="search" action="../../search.html" method="get">
    <input type="search" name="q" placeholder="Search" />
    <button type="submit">
      <img src="https://raw.githubusercontent.com/thoughtbot/refills/master/source/images/search-icon-black.png" alt="Search Icon">
    </button>
  </form>
</div>
    </div>
  </div>

<!-- MAIN BODY OF DOCS –––––––––––––––––– -->
  <div class="docs section">
    <div class="toc">
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Getting Set Up</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Defining Key Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting.html">Plotting with Basic Glyphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="charts.html">Making High-level Charts</a></li>
<li class="toctree-l1"><a class="reference internal" href="compat.html">Leveraging Other Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="annotations.html">Adding Annotations</a></li>
<li class="toctree-l1"><a class="reference internal" href="styling.html">Styling Visual Attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Configuring Plot Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="layout.html">Laying out Plots and Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebook.html">Working in the Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="interaction.html">Adding Interactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="interaction/linking.html">Linking Plots</a></li>
<li class="toctree-l1"><a class="reference internal" href="interaction/widgets.html">Adding Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="interaction/callbacks.html">JavaScript Callbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Using <code class="docutils literal"><span class="pre">bokeh</span></code> Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="server.html">Running a Bokeh Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="embed.html">Embedding Plots and Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="webgl.html">Speeding up with WebGL</a></li>
<li class="toctree-l1"><a class="reference internal" href="geo.html">Mapping Geo Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="bokehjs.html">Developing with JavaScript</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Extending Bokeh</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#structure-of-bokeh-models">Structure of Bokeh Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#python-models">Python Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="#javascript-models-and-views">JavaScript Models and Views</a></li>
<li class="toctree-l3"><a class="reference internal" href="#putting-it-together">Putting it Together</a></li>
<li class="toctree-l3"><a class="reference internal" href="#integration-with-bokeh-server">Integration with Bokeh Server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="extensions_gallery/ticking.html">Specialized Axis Ticking</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions_gallery/tool.html">A New Custom Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions_gallery/wrapping.html">Wrapping A JavaScript Library</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="info.html">Learning More</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/bokeh.html"><code class="docutils literal"><span class="pre">bokeh</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/charts.html"><code class="docutils literal"><span class="pre">bokeh.charts</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/client.html"><code class="docutils literal"><span class="pre">bokeh.client</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/core.html"><code class="docutils literal"><span class="pre">bokeh.core</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/document.html"><code class="docutils literal"><span class="pre">bokeh.document</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/driving.html"><code class="docutils literal"><span class="pre">bokeh.driving</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/embed.html"><code class="docutils literal"><span class="pre">bokeh.embed</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/icons.html"><code class="docutils literal"><span class="pre">bokeh.icons</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/io.html"><code class="docutils literal"><span class="pre">bokeh.io</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/layouts.html"><code class="docutils literal"><span class="pre">bokeh.layouts</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/model.html"><code class="docutils literal"><span class="pre">bokeh.model</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/models.html"><code class="docutils literal"><span class="pre">bokeh.models</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/mpl.html"><code class="docutils literal"><span class="pre">bokeh.mpl</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/palettes.html"><code class="docutils literal"><span class="pre">bokeh.palettes</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/plotting.html"><code class="docutils literal"><span class="pre">bokeh.plotting</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/resources.html"><code class="docutils literal"><span class="pre">bokeh.resources</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/sampledata.html"><code class="docutils literal"><span class="pre">bokeh.sampledata</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/server.html"><code class="docutils literal"><span class="pre">bokeh.server</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/settings.html"><code class="docutils literal"><span class="pre">bokeh.settings</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/sphinxext.html"><code class="docutils literal"><span class="pre">bokeh.sphinxext</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/themes.html"><code class="docutils literal"><span class="pre">bokeh.themes</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/tile_providers.html"><code class="docutils literal"><span class="pre">bokeh.tile_providers</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/util.html"><code class="docutils literal"><span class="pre">bokeh.util</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.12.0.html">0.12.0 (Jun 2016)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.11.1.html">0.11.1 (Feb 2016)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.11.0.html">0.11.0 (Jan 2016)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.10.0.html">0.10.0 (Sep 2015)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.9.3.html">0.9.3 (Aug 2015)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.9.2.html">0.9.2 (Jul 2015)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.9.1.html">0.9.1 (Jul 2015)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.9.0.html">0.9.0 (May 2015)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.8.2.html">0.8.2 (Mar 2015)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.8.1.html">0.8.1 (Feb 2015)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.8.0.html">0.8.0 (Feb 2015)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.7.1.html">0.7.1 (Jan 2015)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.7.0.html">0.7.0 (Dec 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.6.1.html">0.6.1 (Sep 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.6.0.html">0.6.0 (Sep 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.5.2.html">0.5.2 (Aug 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.5.1.html">0.5.1 (Jul 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.5.0.html">0.5.0 (Jul 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.4.4.html">0.4.4 (Apr 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.4.2.html">0.4.2 (Mar 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.4.1.html">0.4.1 (Feb 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.4.0.html">0.4.0 (Feb 2014)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.3.0.html">0.3.0 (Nov 2013)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.2.0.html">0.2.0 (Oct 2013)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/0.1.0.html">0.1.0 (Apr 2013)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/setup.html">Getting Set Up</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/env_vars.html">Environment Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/models.html">Bokeh Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/server.html">Server Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/bindings.html">Language Bindings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/bokehjs.html">BokehJS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guide/notes.html">Notes</a></li>
</ul>

    </div>
    <div class="content">
        
  <div class="section" id="extending-bokeh">
<span id="userguide-extensions"></span><h1>Extending Bokeh<a class="headerlink" href="#extending-bokeh" title="Permalink to this headline">¶</a></h1>
<p>Bokeh comes with a rich variety of built-in types that can be used to make
sophisticated interactive visualizations and data applications in the browser.
However, there are capabilities and features that users may desire, which may
not make it into the core library, either because they are too specialized, or
for lack of resources. Fortunately, it is possible to extend Bokeh by creating
custom user extensions.</p>
<ul class="simple">
<li>Modify the behaviour of existing Bokeh models</li>
<li>Add new models to connect third-party JavaScript libraries to Python</li>
<li>Create highly specialized models for domain specific use-cases.</li>
</ul>
<p>Custom extensions can be made and used with standard releases, and do not
require setting up a development environment or building anything from source.
They provide the easiest way to get involved in Bokeh development. By lowering
the bar for extending Bokeh, users are afforded the ability to &#8220;try out&#8221; new
features and functionality (which might some day be candidates for adding to
the core library) without having to wait on the core team.</p>
<div class="section" id="structure-of-bokeh-models">
<span id="userguide-extensions-structure"></span><h2>Structure of Bokeh Models<a class="headerlink" href="#structure-of-bokeh-models" title="Permalink to this headline">¶</a></h2>
<div class="section" id="python-models">
<span id="userguide-extensions-structure-python"></span><h3>Python Models<a class="headerlink" href="#python-models" title="Permalink to this headline">¶</a></h3>
<p>For the most part, Python Bokeh models are completely declarative classes.
Custom extensions are created by making a subclass <a class="reference internal" href="../reference/model.html#bokeh.model.Model" title="bokeh.model.Model"><code class="xref py py-class docutils literal"><span class="pre">Model</span></code></a>
(or one of its subclasses), and including special class attributes to
declare the properties that are mirrored on the JavaScript side. All of the
available property types are documented in the <a class="reference internal" href="../reference/core.html#bokeh-core-properties"><span class="std std-ref">bokeh.core.properties</span></a>
section of the Reference Guide.</p>
<p>A small example that creates a Custom readout for a slider is presented
below:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.core.properties</span> <span class="kn">import</span> <span class="n">String</span><span class="p">,</span> <span class="n">Instance</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">LayoutDOM</span><span class="p">,</span> <span class="n">Slider</span>

<span class="k">class</span> <span class="nc">Custom</span><span class="p">(</span><span class="n">LayoutDOM</span><span class="p">):</span>

    <span class="n">text</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;Custom text&quot;</span><span class="p">)</span>

    <span class="nb">range</span> <span class="o">=</span> <span class="n">Instance</span><span class="p">(</span><span class="n">Slider</span><span class="p">)</span>
</pre></div>
</div>
<p>Since we would like to create a custom extension that can participate in DOM
layout, we subclass from <a class="reference internal" href="../reference/models/layouts.html#bokeh.models.layouts.LayoutDOM" title="bokeh.models.layouts.LayoutDOM"><code class="xref py py-class docutils literal"><span class="pre">LayoutDOM</span></code></a>. We also
added two properties: a <a class="reference internal" href="../reference/core.html#bokeh.core.properties.String" title="bokeh.core.properties.String"><code class="xref py py-class docutils literal"><span class="pre">String</span></code></a> to configure
a text message for the readout, and an <a class="reference internal" href="../reference/core.html#bokeh.core.properties.Instance" title="bokeh.core.properties.Instance"><code class="xref py py-class docutils literal"><span class="pre">Instance</span></code></a>
that can hold a <a class="reference internal" href="../reference/models/widgets.inputs.html#bokeh.models.widgets.inputs.Slider" title="bokeh.models.widgets.inputs.Slider"><code class="xref py py-class docutils literal"><span class="pre">Slider</span></code></a>. The JavaScript
<code class="docutils literal"><span class="pre">Slider</span></code> object that corresponds to the Python <code class="docutils literal"><span class="pre">Slider</span></code> will be made
available to use.</p>
</div>
<div class="section" id="javascript-models-and-views">
<span id="userguide-extensions-structure-js"></span><h3>JavaScript Models and Views<a class="headerlink" href="#javascript-models-and-views" title="Permalink to this headline">¶</a></h3>
<p>While the Python side is mostly declarative, without much or any real code, the
JavaScript side requires code to implement the model. When appropriate, code
for a corresponding view must also be provided. Currently BokehJS models and
views are subclasses of Models and View from the Backbone JavaScript library.</p>
<p>Below is an annotated JavaScript implemenation for <code class="docutils literal"><span class="pre">Custom</span></code> and its
<code class="docutils literal"><span class="pre">CustomView</span></code>. For built-in models, this code is included directly in the
final <code class="docutils literal"><span class="pre">bokeh.js</span></code> library. We will see how to connect this code to custom
extensions in the next section.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">BokehJS is largely written in <a class="reference external" href="http://coffeescript.org">CoffeeScript</a>. Accordingly, the examples
and guidance here are presented in CoffeeScript. However, custom extensions
can be written in pure JavaScript as well.</p>
</div>
<div class="highlight-coffeescript"><div class="highlight"><pre><span></span><span class="c1"># These are similar to python imports. BokehJS vendors its own versions</span>
<span class="c1"># of Underscore and JQuery. They are available as show here.</span>
<span class="nv">_ = </span><span class="nx">require</span> <span class="s">&quot;underscore&quot;</span>
<span class="nv">$ = </span><span class="nx">require</span> <span class="s">&quot;jquery&quot;</span>

<span class="c1"># The &quot;core/properties&quot; module has all the property types</span>
<span class="nv">p = </span><span class="nx">require</span> <span class="s">&quot;core/properties&quot;</span>

<span class="c1"># We will subclass in JavaScript from the same class that was subclassed</span>
<span class="c1"># from in Python</span>
<span class="nv">LayoutDOM = </span><span class="nx">require</span> <span class="s">&quot;models/layouts/layout_dom&quot;</span>

<span class="c1"># This model will actually need to render things, so we must provide</span>
<span class="c1"># view. The LayoutDOM model has a view already, so we will start with that</span>
<span class="k">class</span> <span class="nx">CustomView</span> <span class="k">extends</span> <span class="nx">LayoutDOM</span><span class="p">.</span><span class="nx">View</span>

  <span class="nv">initialize: </span><span class="nf">(options) -&gt;</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span>

    <span class="nx">@render</span><span class="p">()</span>

    <span class="c1"># Set Backbone listener so that when the Bokeh slider has a change</span>
    <span class="c1"># event, we can process the new data</span>
    <span class="nx">@listenTo</span><span class="p">(</span><span class="nx">@model</span><span class="p">.</span><span class="nx">slider</span><span class="p">,</span> <span class="s">&#39;change&#39;</span><span class="p">,</span> <span class="nf">() =&gt;</span> <span class="nx">@render</span><span class="p">())</span>

  <span class="nv">render: </span><span class="nf">() -&gt;</span>
    <span class="c1"># Backbone Views create &lt;div&gt; elements by default, accessible as @$el.</span>
    <span class="c1"># Many Bokeh views ignore this default &lt;div&gt;, and instead do things</span>
    <span class="c1"># like draw to the HTML canvas. In this case though, we change the</span>
    <span class="c1"># contents of the &lt;div&gt;, based on the current slider value.</span>
    <span class="nx">@$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s">&quot;&lt;h1&gt;</span><span class="si">#{</span> <span class="nx">@model</span><span class="p">.</span><span class="nx">text</span> <span class="si">}</span><span class="s">: </span><span class="si">#{</span> <span class="nx">@model</span><span class="p">.</span><span class="nx">slider</span><span class="p">.</span><span class="nx">value</span> <span class="si">}</span><span class="s">&lt;/h1&gt;&quot;</span><span class="p">)</span>
    <span class="nx">@$</span><span class="p">(</span><span class="s">&#39;h1&#39;</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span> <span class="s">&#39;color&#39;</span><span class="o">:</span> <span class="s">&#39;#686d8e&#39;</span><span class="p">,</span> <span class="s">&#39;background-color&#39;</span><span class="o">:</span> <span class="s">&#39;#2a3153&#39;</span> <span class="p">})</span>

<span class="k">class</span> <span class="nx">Custom</span> <span class="k">extends</span> <span class="nx">LayoutDOM</span><span class="p">.</span><span class="nx">Model</span>

  <span class="c1"># If there is an associated view, this is boilerplate.</span>
  <span class="nv">default_view: </span><span class="nx">CustomView</span>

  <span class="c1"># The ``type`` class attribute should generally match exactly the name</span>
  <span class="c1"># of the corresponding Python class.</span>
  <span class="nv">type: </span><span class="s">&quot;Custom&quot;</span>

  <span class="c1"># The @define block adds corresponding &quot;properties&quot; to the JS model. These</span>
  <span class="c1"># should basically line up 1-1 with the Python model class. Most property</span>
  <span class="c1"># types have counterparts, e.g. bokeh.core.properties.String will be</span>
  <span class="c1"># p.String in the JS implementation. Where the JS type system is not yet</span>
  <span class="c1"># as rich, you can use p.Any as a &quot;wildcard&quot; property type.</span>
  <span class="nx">@define</span> <span class="p">{</span>
    <span class="nv">text: </span>  <span class="p">[</span> <span class="nx">p</span><span class="p">.</span><span class="nb">String</span> <span class="p">]</span>
    <span class="nv">slider: </span><span class="p">[</span> <span class="nx">p</span><span class="p">.</span><span class="nx">Any</span>    <span class="p">]</span>
  <span class="p">}</span>

<span class="c1"># This is boilerplate. Every implementation should export a Model</span>
<span class="c1"># and (when applicable) also a View.</span>
<span class="nv">module.exports =</span>
  <span class="nv">Model: </span><span class="nx">Custom</span>
  <span class="nv">View: </span><span class="nx">CustomView</span>
</pre></div>
</div>
</div>
<div class="section" id="putting-it-together">
<span id="userguide-extensions-structure-putting-together"></span><h3>Putting it Together<a class="headerlink" href="#putting-it-together" title="Permalink to this headline">¶</a></h3>
<p>For built-in Bokeh models, the implementation in BokehJS is automatically
matched with the corresponding Python model by the build process. In order
connect JavaScript implementations to Python models, one additional step
is needed. The Python class should have have a class attribute called
<code class="docutils literal"><span class="pre">__implementation__</span></code> whose value is the JavaScript (or CoffeeScript) code
that the defined the client-side model (and optional view).</p>
<p>Assuming the CoffeeScript code above was saved in a file <code class="docutils literal"><span class="pre">custom.coffee</span></code>,
then the complete Python class might look like:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.core.properties</span> <span class="kn">import</span> <span class="n">String</span><span class="p">,</span> <span class="n">Instance</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">LayoutDOM</span><span class="p">,</span> <span class="n">Slider</span>

<span class="k">class</span> <span class="nc">Custom</span><span class="p">(</span><span class="n">LayoutDOM</span><span class="p">):</span>

    <span class="n">__implementation__</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;custom.coffee&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="n">text</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;Custom text&quot;</span><span class="p">)</span>

    <span class="n">slider</span> <span class="o">=</span> <span class="n">Instance</span><span class="p">(</span><span class="n">Slider</span><span class="p">)</span>
</pre></div>
</div>
<p>Then, if this class is defined in a Python module <code class="docutils literal"><span class="pre">custom.py</span></code> then the custom
extension can now be used exactly like any built-in Bokeh model:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">column</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">Slider</span>

<span class="kn">from</span> <span class="nn">custom</span> <span class="kn">import</span> <span class="n">Custom</span>

<span class="n">slider</span> <span class="o">=</span> <span class="n">Slider</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

<span class="n">custom</span> <span class="o">=</span> <span class="n">Custom</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Special Slider Display&quot;</span><span class="p">,</span> <span class="n">slider</span><span class="o">=</span><span class="n">slider</span><span class="p">)</span>

<span class="n">layout</span> <span class="o">=</span> <span class="n">column</span><span class="p">(</span><span class="n">slider</span><span class="p">,</span> <span class="n">custom</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
</pre></div>
</div>
<p>Which results in the output below. The JavaScript code for the implementation
is automatically included in the rendered document. Scrub the slider to see
the special header update as the slider moves:</p>

<div class="bk-root">
    
    <script
        src="bokeh-plot-ffdd464769b864669e36196d4a1c6704.js"
        id="45edd429-d39a-4d7d-a4ef-f5a79151e14c"
        data-bokeh-model-id="200c6aa9-6638-4cd6-af68-bb84dcc879bd"
        data-bokeh-doc-id="cd70646f-660b-41ea-b59a-48f99eaea5ca"
    ></script>
</div></div>
<div class="section" id="integration-with-bokeh-server">
<span id="userguide-extensions-structure-server-integration"></span><h3>Integration with Bokeh Server<a class="headerlink" href="#integration-with-bokeh-server" title="Permalink to this headline">¶</a></h3>
<p>No special work or modification is needed to integrate custom user extensions
with the Bokeh server. As for standalone documents, the JavaScript
implementation is automatically included in the rendered application.
Additionally the standard synchronization of Bokeh model properties that
happens for all built-in models happens transparently for custom user
extensions as well.</p>
</div>
</div>
<div class="section" id="examples">
<span id="userguide-extensions-examples"></span><h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Here we present some complete examples to serve as a reference. It is hoped
that the information in this section is a useful point of departure for anyone
creating a custom extensions. However, creating extensions is a somewhat
advanced topic. In many cases, it will be required to study the source code
of the base classes in <a class="reference external" href="https://github.com/bokeh/bokeh/tree/0.12.1/bokehjs/src/coffee/models">bokehjs/src/coffee/models</a>.</p>
<p>For any questions that remain, please contact any of the sources in
<a class="reference internal" href="info.html#userguide-info"><span class="std std-ref">Learning More</span></a>.Collaborating with the community will help make additions
and improvements to this section for future users.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="extensions_gallery/ticking.html">Specialized Axis Ticking</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions_gallery/tool.html">A New Custom Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions_gallery/wrapping.html">Wrapping A JavaScript Library</a></li>
</ul>
</div>
<dl class="docutils">
<dt><a class="reference internal" href="extensions_gallery/ticking.html#userguide-extensions-examples-ticking"><span class="std std-ref">Specialized Axis Ticking</span></a></dt>
<dd>Subclass built-in Bokeh models for axis ticking to customize their
behaviour.</dd>
<dt><a class="reference internal" href="extensions_gallery/tool.html#userguide-extensions-examples-tool"><span class="std std-ref">A New Custom Tool</span></a></dt>
<dd>Make a completely new tool that can draw on a plot canvas.</dd>
<dt><a class="reference internal" href="extensions_gallery/wrapping.html#userguide-extensions-examples-wrapping"><span class="std std-ref">Wrapping A JavaScript Library</span></a></dt>
<dd>Connect Python to a third-party JavaScript library by wrapping it with
a Bokeh custom extension.</dd>
</dl>
</div>
</div>


    </div>
  </div>

<!-- END MAIN BODY OF DOCS ––––––––––––– -->

<footer class="footer">
  <div class="footer-links">
    <ul>
      <li><span class="footer-title">About Us</span></li>
      
          <li><a href="//bokeh.org/">About</a></li>
      
          <li><a href="//bokeh.org/team/">Team</a></li>
      
          <li><a href="//bokeh.org/team/">Contact</a></li>
      
    </ul>
    <ul>
      <li><span class="footer-title">Links</span></li>
      
          <li><a href="//bokeh.org/">FAQs</a></li>
      
          <li><a href="//bokeh.org/roadmap/">Technical vision</a></li>
      
          <li><a href="//bokeh.org/roadmap/">Roadmap</a></li>
      
          <li><a href="//bokeh.org/citation/">Citation</a></li>
      
    </ul>
    <ul>
      <li><span class="footer-title">Join Us</span></li>
      
          <li><a href="//bokeh.org/">Contribute</a></li>
      
          <li><a href="//groups.google.com/a/continuum.io/forum/#!forum/bokeh">Mailing list</a></li>
      
          <li><a href="//github.com/bokeh/bokeh">Github</a></li>
      
          <li><a href="//twitter.com/BokehPlots">Twitter</a></li>
      
          <li><a href="//www.youtube.com/channel/UCK0rSk29mmg4UT4bIOvPYhw">YouTube</a></li>
      
    </ul>
    <ul class="copyright">
      <li>© Copyright 2015, Anaconda.</li>
    </ul>
  </div>
</footer>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27761864-7', 'auto');
  ga('user.set', 'anonymizeIp', true);ga('send', 'pageview');
</script>

<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
</body>

</html>